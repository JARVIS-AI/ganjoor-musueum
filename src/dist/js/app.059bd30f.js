(function(t){function e(e){for(var a,o,s=e[0],l=e[1],c=e[2],d=0,g=[];d<s.length;d++)o=s[d],n[o]&&g.push(n[o][0]),n[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(e);while(g.length)g.shift()();return i.push.apply(i,c||[]),r()}function r(){for(var t,e=0;e<i.length;e++){for(var r=i[e],a=!0,s=1;s<r.length;s++){var l=r[s];0!==n[l]&&(a=!1)}a&&(i.splice(e--,1),t=o(o.s=r[0]))}return t}var a={},n={app:0},i=[];function o(e){if(a[e])return a[e].exports;var r=a[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=a,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(r,a,function(e){return t[e]}.bind(null,a));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var u=l;i.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("1d50")},"0d9c":function(t,e,r){},1811:function(t,e,r){},"1d1f":function(t,e,r){"use strict";var a=r("ab33"),n=r.n(a);n.a},"1d50":function(t,e,r){"use strict";r.r(e);r("646a"),r("4757"),r("d57d"),r("2026"),r("8b61"),r("dd0e");var a=r("e832"),n=r("4af9"),i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{attrs:{"grid-list-sm":"",fluid:""}},[r("v-layout",{attrs:{row:"",wrap:"","align-center":"","text-center":"","fill-height":""}},[""!=t.errorMsg?r("v-flex",{attrs:{xs12:""}},[r("v-card",{attrs:{dark:"",color:"secondary"}},[r("v-card-text",[t._v(t._s(t.errorMsg))])],1)],1):t._e(),t.loading?r("v-flex",{attrs:{xs12:""}},[r("v-card",{attrs:{dark:"",color:"secondary"}},[r("v-progress-circular",{attrs:{indeterminate:""}})],1)],1):t._e(),t.items.length>0?r("v-flex",{attrs:{xs12:""}},[r("v-card",{attrs:{dark:"",color:"secondary"}},[r("v-card-text",[t._v("نسخه‌های اضافه شدهٔ اخیر "),r("small",[r("router-link",{staticStyle:{color:"lawngreen"},attrs:{to:"/items"}},[t._v("(فهرست کامل)")])],1)])],1)],1):t._e(),t._l(t.items,function(e){return r("v-flex",{key:e.id,attrs:{"d-flex":""}},[r("v-card",{staticClass:"d-flex",staticStyle:{width:"200px"},attrs:{flat:"",dark:"",raised:""}},[r("router-link",{attrs:{to:"/items/"+e.friendlyUrl}},[r("v-img",{staticClass:"grey lighten-2 clickable",attrs:{src:t.appConfig.$api_url+"/api/images/thumb/"+e.coverImage.id+".jpg",width:"200px"},scopedSlots:t._u([{key:"placeholder",fn:function(){return[r("v-layout",{attrs:{"fill-height":"","align-center":"","justify-center":"","ma-0":""}},[r("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!0)}),r("v-card-subtitle",{staticStyle:{color:"lightgray"}},[t._v("\n                        "+t._s(e.name)+"\n                    ")])],1)],1)],1)}),t.loadingAuthors?r("v-flex",{attrs:{xs12:""}},[r("v-card",{attrs:{dark:"",color:"secondary"}},[r("v-progress-circular",{attrs:{indeterminate:""}})],1)],1):t._e(),t.authors.length>0?r("v-flex",{attrs:{xs12:""}},[r("v-card",{attrs:{dark:"",color:"secondary"}},[r("v-card-text",[t._v("مرور بر اساس پدیدآورنده "),r("small",[r("router-link",{staticStyle:{color:"lawngreen"},attrs:{to:"/tags/contributor"}},[t._v("(فهرست کامل)")])],1)])],1)],1):t._e(),t._l(t.authors,function(e){return r("v-flex",{key:e.friendlyUrl,attrs:{"d-flex":""}},[r("v-card",{staticClass:"d-flex",attrs:{flat:"",dark:"",raised:""}},[r("router-link",{attrs:{to:"/tags/contributor/"+e.friendlyUrl}},[r("v-img",{staticClass:"grey lighten-2 clickable",attrs:{src:t.appConfig.$api_url+"/api/images/thumb/"+e.imageId+".jpg",width:"200px"},scopedSlots:t._u([{key:"placeholder",fn:function(){return[r("v-layout",{attrs:{"fill-height":"","align-center":"","justify-center":"","ma-0":""}},[r("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!0)}),r("v-card-subtitle",{staticStyle:{color:"lightgray"}},[t._v("\n                        "+t._s(e.name)+" ("+t._s(e.count)+")\n                    ")])],1)],1)],1)}),t.loadingBooks?r("v-flex",{attrs:{xs12:""}},[r("v-card",{attrs:{dark:"",color:"secondary"}},[r("v-progress-circular",{attrs:{indeterminate:""}})],1)],1):t._e(),t.books.length>0?r("v-flex",{attrs:{xs12:""}},[r("v-card",{attrs:{dark:"",color:"secondary"}},[r("v-card-text",[t._v("مرور بر اساس نام کتاب "),r("small",[r("router-link",{staticStyle:{color:"lawngreen"},attrs:{to:"/tags/book"}},[t._v("(فهرست کامل)")])],1)])],1)],1):t._e(),t._l(t.books,function(e){return r("v-flex",{key:e.friendlyUrl,attrs:{"d-flex":""}},[r("v-card",{staticClass:"d-flex",attrs:{flat:"",dark:"",raised:""}},[r("router-link",{attrs:{to:"/tags/book/"+e.friendlyUrl}},[r("v-img",{staticClass:"grey lighten-2 clickable",attrs:{src:t.appConfig.$api_url+"/api/images/thumb/"+e.imageId+".jpg",width:"200px"},scopedSlots:t._u([{key:"placeholder",fn:function(){return[r("v-layout",{attrs:{"fill-height":"","align-center":"","justify-center":"","ma-0":""}},[r("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!0)}),r("v-card-subtitle",{staticStyle:{color:"lightgray"}},[t._v("\n                        "+t._s(e.name)+" ("+t._s(e.count)+")\n                    ")])],1)],1)],1)})],2)],1)},o=[],s=(r("0f54"),r("7338")),l=r.n(s),c=r("54d5"),u=r("1570"),d=function(){function t(){Object(c["a"])(this,t)}return Object(u["a"])(t,null,[{key:"handle",value:function(t){return t.response?t.response.data+" - "+t.response.status+" - "+t.response.headers:t.request?t.request:t.message}}]),t}(),g=new a["default"],p={name:"HomePage",data:function(){return{userInfo:null,items:[],errorMsg:"",loading:!0,authors:[],loadingAuthors:!0,books:[],loadingBooks:!0}},mounted:function(){if(document.title="گنجینهٔ گنجور",localStorage.getItem("userInfo"))try{this.userInfo=JSON.parse(localStorage.getItem("userInfo"))}catch(t){this.userInfo=null}g.$on("user-logged-in",this.userLoggedIn),g.$on("user-logged-out",this.userLoggedOut),this.loadArtifacts(),this.loadAuthors(),this.loadBooks()},methods:{userLoggedIn:function(t){this.userInfo=t,this.loadArtifacts()},userLoggedOut:function(){this.userInfo=null,this.loadArtifacts()},loadArtifacts:function(){var t=this;this.loading=!0,null==this.userInfo?l()({method:"GET",url:this.appConfig.$api_url+"/api/artifacts?PageNumber=1&PageSize=6",data:{},headers:{"content-type":"application/json"}}).then(function(e){t.handleArtifactsResults(e)},function(e){t.handleArtifactsError(e)}):l()({method:"GET",url:this.appConfig.$api_url+"/api/artifacts/secure?PageNumber=1&PageSize=6",data:{},headers:{"content-type":"application/json",authorization:"bearer "+this.userInfo.token}}).then(function(e){t.handleArtifactsResults(e)},function(e){t.errorMsg="خطا در دریافت فهرست نسخه‌های اضافه شدهٔ اخیر - "+d.handle(e),t.loading=!1})},handleArtifactsResults:function(t){this.items=t.data,this.loading=!1},loadAuthors:function(){var t=this;this.loadingAuthors=!0,l()({method:"GET",url:this.appConfig.$api_url+"/api/artifacts/tagbundle/contributor",data:{},headers:{"content-type":"application/json"}}).then(function(e){t.handleAuthorsResults(e)},function(e){t.errorMsg="خطا در دریافت فهرست پدیدآورندگان - "+d.handle(e),t.loadingAuthors=!1})},handleAuthorsResults:function(t){this.authors=t.data.values.splice(0,6),this.loadingAuthors=!1},loadBooks:function(){var t=this;this.loadingBooks=!0,l()({method:"GET",url:this.appConfig.$api_url+"/api/artifacts/tagbundle/book",data:{},headers:{"content-type":"application/json"}}).then(function(e){t.handleBooksResults(e)},function(e){t.errorMsg="خطا در دریافت فهرست کتابها - "+d.handle(e),t.loadingBooks=!1})},handleBooksResults:function(t){this.books=t.data.values.splice(0,6),this.loadingBooks=!1}}},h=p,v=(r("2c96"),r("a6c2")),f=Object(v["a"])(h,i,o,!1,null,null,null),m=f.exports,_=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{attrs:{"grid-list-sm":"",fluid:""}},[r("v-layout",{attrs:{row:"",wrap:"","align-center":"","text-center":"","fill-height":""}},[t.loading?r("v-flex",{attrs:{xs12:""}},[r("v-card",{attrs:{dark:"",color:"secondary"}},[r("v-progress-circular",{attrs:{indeterminate:""}})],1)],1):t._e(),t.loading?t._e():r("v-flex",{attrs:{xs12:""}},[r("v-card",[r("div",{staticClass:"text-center"},[r("v-pagination",{attrs:{length:t.pageCount,circle:"","prev-icon":"mdi-menu-right","next-icon":"mdi-menu-left"},on:{input:t.pageNumberChanged},model:{value:t.pageNumber,callback:function(e){t.pageNumber=e},expression:"pageNumber"}})],1)])],1),t._l(t.items,function(e){return r("v-flex",{key:e.id,attrs:{"d-flex":""}},[r("v-card",{staticClass:"d-flex",staticStyle:{width:"200px"},attrs:{flat:"",dark:"",raised:""}},[r("router-link",{attrs:{to:"/items/"+e.friendlyUrl}},[r("v-img",{staticClass:"grey lighten-2 clickable",attrs:{src:t.appConfig.$api_url+"/api/images/thumb/"+e.coverImage.id+".jpg",width:"200px"},scopedSlots:t._u([{key:"placeholder",fn:function(){return[r("v-layout",{attrs:{"fill-height":"","align-center":"","justify-center":"","ma-0":""}},[r("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!0)}),r("v-card-subtitle",{staticStyle:{color:"lightgray"}},[t._v("\n                        "+t._s(e.name)+"\n                    ")])],1)],1)],1)}),t.loading?t._e():r("v-flex",{attrs:{xs12:""}},[r("v-card",[r("div",{staticClass:"text-center"},[r("v-pagination",{attrs:{length:t.pageCount,circle:"","prev-icon":"mdi-menu-right","next-icon":"mdi-menu-left"},on:{input:t.pageNumberChanged},model:{value:t.pageNumber,callback:function(e){t.pageNumber=e},expression:"pageNumber"}})],1)])],1),""!=t.errorMsg?r("v-flex",{attrs:{xs12:""}},[r("v-card",{attrs:{dark:"",color:"secondary"}},[r("v-card-text",[t._v(t._s(t.errorMsg))])],1)],1):t._e()],2)],1)},b=[],y={name:"Items",data:function(){return{userInfo:null,items:[],pageSize:50,pageNumber:1,pageCount:0,errorMsg:"",loading:!0}},mounted:function(){if(document.title="گنجینهٔ گنجور - مشاهدهٔ همه نسخه‌ها",localStorage.getItem("userInfo"))try{this.userInfo=JSON.parse(localStorage.getItem("userInfo"))}catch(t){this.userInfo=null}g.$on("user-logged-in",this.userLoggedIn),g.$on("user-logged-out",this.userLoggedOut),this.loadArtifacts()},methods:{userLoggedIn:function(t){this.userInfo=t,this.loadArtifacts()},userLoggedOut:function(){this.userInfo=null,this.loadArtifacts()},loadArtifacts:function(){var t=this;this.loading=!0,this.pageNumber=1,null!=this.$route.params.pageno&&(this.pageNumber=parseInt(this.$route.params.pageno)),document.title="گنجینهٔ گنجور - مشاهدهٔ همه نسخه‌ها - صفحهٔ "+this.pageNumber,null==this.userInfo?l()({method:"GET",url:this.appConfig.$api_url+"/api/artifacts?PageNumber="+this.pageNumber+"&PageSize="+this.pageSize,data:{},headers:{"content-type":"application/json"}}).then(function(e){t.handleArtifactsResults(e)},function(e){t.handleArtifactsError(e)}):l()({method:"GET",url:this.appConfig.$api_url+"/api/artifacts/secure?PageNumber="+this.pageNumber+"&PageSize="+this.pageSize,data:{},headers:{"content-type":"application/json",authorization:"bearer "+this.userInfo.token}}).then(function(e){t.handleArtifactsResults(e)},function(e){t.handleArtifactsError(e)})},handleArtifactsResults:function(t){this.items=t.data,this.pageCount=JSON.parse(t.headers["paging-headers"]).totalPages,this.loading=!1},handleArtifactsError:function(t){this.errorMsg=d.handle(t),this.loading=!1},pageNumberChanged:function(t){this.$router.push("/items/pageno/"+t),this.loadArtifacts()}}},k=y,x=(r("b900"),Object(v["a"])(k,_,b,!1,null,null,null)),I=x.exports,N=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{attrs:{"grid-list-md":"","text-center":""}},[r("v-layout",{attrs:{wrap:""}},[null==t.item?r("v-flex",{attrs:{xs12:""}},[r("v-card",{attrs:{dark:"",color:"secondary"}},[r("v-progress-circular",{attrs:{indeterminate:""}})],1)],1):t._e(),""!=t.errorMsg?r("v-flex",{attrs:{xs12:""}},[r("v-card",[r("v-card-text",[t._v(t._s(t.errorMsg))])],1)],1):t._e(),r("v-flex",{attrs:{xs4:""}},[r("v-card",{attrs:{dark:"",color:"secondary"}},[null!=t.item?r("v-card-text",[r("v-img",{staticClass:"grey lighten-2 clickable coverImage",attrs:{src:t.appConfig.$api_url+"/api/images/thumb/"+t.item.coverImage.id+".jpg","max-width":"200px"},on:{click:function(e){return t.coverImageClicked()}},scopedSlots:t._u([{key:"placeholder",fn:function(){return[r("v-layout",{attrs:{"fill-height":"","align-center":"","justify-center":"","ma-0":""}},[r("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!1,1258913907)}),r("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("v-chip",t._g({attrs:{outlined:"",color:"white"},on:{click:function(e){return t.showCoverImage()}}},a),[r("v-icon",{attrs:{dark:""}},[t._v("image")])],1)]}}],null,!1,3018278110)},[r("span",[t._v("مشاهدهٔ تصویر متناظر جلد")])]),r("a",{attrs:{href:"http://viewer.ganjoor.net/"+t.item.friendlyUrl}},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("v-chip",t._g({staticClass:"clickable",attrs:{outlined:"",color:"white"}},a),[r("v-icon",{attrs:{dark:""}},[t._v("local_library")])],1)]}}],null,!1,1707419226)},[r("span",[t._v("مشاهده در نمای کتابخوان")])])],1)],1):t._e(),r("v-card",{attrs:{dark:"",color:"primary"}},[null!=t.item?r("v-card-text",[t._v("\n                        "+t._s(t.item.name)+" "),r("small",[t._v("("+t._s(t.item.itemCount)+" تصویر)")]),null!=t.userInfo?r("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("v-btn",t._g({attrs:{text:"",icon:"",color:"yellow"},on:{click:function(e){return t.bookmark()}}},a),[r("v-icon",[t._v(t._s(t.getbookmarkIcon()))])],1)]}}],null,!1,1489931996)},[r("span",[t._v(t._s(t.getbookmarkTooltip()))])]):t._e()],1):t._e(),null!=t.item&&null!=t.filteredTag?r("v-card-text",[t._v("تصاویر با ویژگی "+t._s(t.filteredTag.name)+" "),null!=t.filteredTagValue?r("span",[t._v(" دارای مقدار "+t._s(t.filteredTagValue.value))]):t._e(),t._v(" "),r("small",[t._v("("+t._s(t.item.items.length)+" تصویر)")])]):t._e()],1),null!=t.item&&t.checkPermission("artifact","modify")?r("v-layout",{attrs:{"justify-center":""}},[r("v-dialog",{attrs:{width:"500"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("v-btn",t._g({attrs:{text:"",icon:"",color:"white",dark:""}},a),[r("v-icon",[t._v("edit")])],1)]}}],null,!1,3194218811),model:{value:t.editingName,callback:function(e){t.editingName=e},expression:"editingName"}},[r("v-card",[r("v-card-text",[r("v-text-field",{attrs:{label:"نام"},model:{value:t.itemName,callback:function(e){t.itemName=e},expression:"itemName"}})],1),r("v-card-text",[r("v-text-field",{attrs:{label:"نشانی"},model:{value:t.itemUrl,callback:function(e){t.itemUrl=e},expression:"itemUrl"}})],1),r("v-card-text",[r("v-select",{attrs:{items:t.statusArray,label:"وضعیت",hint:"وضعیت","persistent-hint":"","return-object":"","single-line":""},model:{value:t.itemStatus,callback:function(e){t.itemStatus=e},expression:"itemStatus"}})],1),t.longProcessInDialogs?r("v-progress-linear",{attrs:{indeterminate:""}}):t._e(),r("v-divider"),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.onEditNameOKClicked()}}},[t._v("تأیید")]),r("v-btn",{attrs:{color:"secondary",text:""},on:{click:function(e){t.editingName=!1}}},[t._v("انصراف")])],1)],1)],1)],1):t._e(),null!=t.item&&t.checkPermission("artifact","delete")&&4!=t.item.status?r("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("v-btn",t._g({attrs:{icon:"",text:"",color:"white"},on:{click:function(e){return t.deleteArtifact()}}},a),[r("v-icon",{attrs:{dark:""}},[t._v("delete")])],1)]}}],null,!1,1953623584)},[r("span",[t._v("حذف")])]):t._e()],1)],1),r("v-flex",{attrs:{xs8:""}},[r("v-card",[null!=t.item?r("v-tabs",{model:{value:t.active_tab,callback:function(e){t.active_tab=e},expression:"active_tab"}},[r("v-tab",{attrs:{href:"#tab-1"}},[t._v("توضیحات")]),r("v-tab",{attrs:{href:"#tab-2"}},[t._v("ویژگیها")]),t.item.contents.length>0?r("v-tab",{attrs:{href:"#tab-3"}},[t._v("فهرست")]):t._e(),null!=t.userInfo?r("v-tab",{attrs:{href:"#tab-4"}},[t._v("یادداشتهای شخصی")]):t._e(),r("v-tab",{attrs:{href:"#tab-5"}},[t._v("یادداشتهای عمومی")])],1):t._e(),null!=t.item?r("v-tabs-items",{model:{value:t.active_tab,callback:function(e){t.active_tab=e},expression:"active_tab"}},[r("v-tab-item",{attrs:{value:"tab-1"}},[r("v-card",[r("v-card-text",{domProps:{innerHTML:t._s(t.item.description)}})],1),r("v-card",{attrs:{dark:"",color:"secondary"}},[t.checkPermission("artifact","modify")?r("v-layout",{attrs:{"justify-center":""}},[r("v-dialog",{attrs:{width:"500"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("v-btn",t._g({attrs:{text:"",icon:"",color:"white",dark:""}},a),[r("v-icon",[t._v("edit")])],1)]}}],null,!1,3194218811),model:{value:t.editingDescription,callback:function(e){t.editingDescription=e},expression:"editingDescription"}},[r("v-card",[r("v-card-text",[r("v-textarea",{attrs:{label:"توضیحات","auto-grow":"",rows:"20"},model:{value:t.itemDescription,callback:function(e){t.itemDescription=e},expression:"itemDescription"}})],1),t.longProcessInDialogs?r("v-progress-linear",{attrs:{indeterminate:""}}):t._e(),r("v-divider"),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.onEditDescriptionOKClicked()}}},[t._v("تأیید")]),r("v-btn",{attrs:{color:"secondary",text:""},on:{click:function(e){t.editingDescription=!1}}},[t._v("انصراف")])],1)],1)],1)],1):t._e()],1)],1),r("v-tab-item",{attrs:{value:"tab-2"}},[t.checkPermission("tag","modify")&&0==t.item.artifactTags.length?r("v-card",[r("v-card-text",[r("v-btn",{attrs:{text:"",icon:""},on:{click:function(e){return t.addTag(null)}}},[r("v-icon",[t._v("add")])],1)],1)],1):t._e(),r("v-simple-table",[r("tbody",[t._l(t.item.artifactTags,function(e){return r("tr",{key:e.id},[null==e.friendlyUrl||2!=e.tagType&&3!=e.tagType?t._e():r("td",[r("router-link",{attrs:{to:"/tags/"+e.friendlyUrl}},[t._v("\n                                            "+t._s(e.name)+"\n                                        ")])],1),null==e.friendlyUrl||2!=e.tagType&&3!=e.tagType?r("td",[t._v("\n                                        "+t._s(e.name)+"\n                                    ")]):t._e(),t.checkPermission("tag","modify")?r("td",[r("v-btn",{attrs:{text:"",icon:""},on:{click:function(r){return t.editTag(e)}}},[r("v-icon",[t._v("edit")])],1),r("v-btn",{attrs:{text:"",icon:""},on:{click:function(r){return t.addTag(e)}}},[r("v-icon",[t._v("add")])],1),r("v-btn",{attrs:{text:"",icon:""},on:{click:function(r){return t.moveTag(e,"up")}}},[r("v-icon",[t._v("arrow_drop_up")])],1),r("v-btn",{attrs:{text:"",icon:""},on:{click:function(r){return t.moveTag(e,"down")}}},[r("v-icon",[t._v("arrow_drop_down")])],1)],1):t._e(),r("td",[r("v-simple-table",[r("tbody",t._l(e.values,function(a){return r("tr",{key:a.id},[null==e.friendlyUrl||null==a.friendlyUrl||2!=e.tagType&&3!=e.tagType?t._e():r("td",[r("router-link",{attrs:{to:"/tags/"+e.friendlyUrl+"/"+a.friendlyUrl}},[t._v("\n                                            "+t._s(a.value)+"\n                                        ")])],1),(2==e.tagType||3==e.tagType)&&(null==e.friendlyUrl||null==a.friendlyUrl)||2!=e.tagType&&3!=e.tagType&&4!=e.tagType?r("td",{domProps:{innerHTML:t._s(a.value)}}):t._e(),4==e.tagType?r("td",{staticClass:"ltrvalue",domProps:{innerHTML:t._s(a.value)}}):t._e(),1==e.tagType||3==e.tagType?r("td",{staticClass:"btnedttagvalue"},[r("a",{attrs:{href:a.valueSupplement,target:"_blank"}},[r("v-btn",{attrs:{text:"",icon:"",color:"primary"}},[r("v-icon",[t._v("open_in_new")])],1)],1)]):t._e(),t.checkPermission("artifact","edittag")?r("td",{staticClass:"btnedttagvalue"},[r("v-btn",{attrs:{text:"",icon:""},on:{click:function(r){return t.editTagValue(a,e)}}},[r("v-icon",[t._v("edit")])],1),r("v-btn",{attrs:{text:"",icon:""},on:{click:function(e){return t.removeTagValue(a)}}},[r("v-icon",[t._v("delete")])],1),r("v-btn",{attrs:{text:"",icon:""},on:{click:function(e){return t.moveValue(a,"up")}}},[r("v-icon",[t._v("arrow_drop_up")])],1),r("v-btn",{attrs:{text:"",icon:""},on:{click:function(e){return t.moveValue(a,"down")}}},[r("v-icon",[t._v("arrow_drop_down")])],1)],1):t._e()])}),0)])],1)])}),t._l(t.item.rTagSums,function(e){return r("tr",{key:e.tagFriendlyUrl},[r("td",[r("router-link",{attrs:{to:"/items/"+t.item.friendlyUrl+"/tags/"+e.tagFriendlyUrl}},[t._v("\n                                    "+t._s(e.tagName)+"\n                                ")])],1),t.checkPermission("tag","modify")?r("td"):t._e(),r("td",[r("router-link",{attrs:{to:"/items/"+t.item.friendlyUrl+"/tags/"+e.tagFriendlyUrl}},[t._v("\n                                    "+t._s(e.itemCount)+" تصویر\n                                ")])],1),t.checkPermission("tag","modify")?r("td"):t._e()])})],2)]),t.checkPermission("tag","modify")?r("v-layout",{attrs:{"justify-center":""}},[r("v-dialog",{attrs:{width:"500"},model:{value:t.addingTagType,callback:function(e){t.addingTagType=e},expression:"addingTagType"}},[r("v-card",[r("v-card-text",[r("v-checkbox",{attrs:{label:"ویژگی از پیش تعریف شده"},model:{value:t.addPredefinedTag,callback:function(e){t.addPredefinedTag=e},expression:"addPredefinedTag"}})],1),t.addPredefinedTag?t._e():r("v-card-text",[r("v-text-field",{attrs:{label:"نام انگلیسی ویژگی"},model:{value:t.tagName,callback:function(e){t.tagName=e},expression:"tagName"}})],1),t.addPredefinedTag?r("v-card-text",[r("v-select",{attrs:{items:t.tagsArray,label:"نام ویژگی",hint:"نام ویژگی","item-text":"name","item-value":"id","persistent-hint":"","return-object":"","single-line":""},model:{value:t.newTag,callback:function(e){t.newTag=e},expression:"newTag"}})],1):t._e(),t.longProcessInDialogs?r("v-progress-linear",{attrs:{indeterminate:""}}):t._e(),r("v-divider"),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.onAddTagOKClicked()}}},[t._v("تأیید")]),r("v-btn",{attrs:{color:"secondary",text:""},on:{click:function(e){t.addingTagType=!1}}},[t._v("انصراف")])],1)],1)],1)],1):t._e(),t.checkPermission("tag","modify")?r("v-layout",{attrs:{"justify-center":""}},[r("v-dialog",{attrs:{width:"500"},model:{value:t.editingTagType,callback:function(e){t.editingTagType=e},expression:"editingTagType"}},[r("v-card",[r("v-card-text",[r("v-text-field",{attrs:{label:"نام ویژگی"},model:{value:t.tagName,callback:function(e){t.tagName=e},expression:"tagName"}})],1),r("v-card-text",[r("v-text-field",{attrs:{label:"اسم جمع"},model:{value:t.tagPlural,callback:function(e){t.tagPlural=e},expression:"tagPlural"}})],1),r("v-card-text",[r("v-select",{attrs:{items:t.tagTypeArray,label:"نوع",hint:"نوع","persistent-hint":"","return-object":"","single-line":""},model:{value:t.tagType,callback:function(e){t.tagType=e},expression:"tagType"}})],1),r("v-card-text",[r("v-text-field",{attrs:{label:"نشانی جستجو"},model:{value:t.tagUrl,callback:function(e){t.tagUrl=e},expression:"tagUrl"}})],1),r("v-card-text",[r("v-checkbox",{attrs:{label:"معمولا همه مقادیر یکسان فارغ از نوع تغییر می‌کند"},model:{value:t.tagValueEditGlobally,callback:function(e){t.tagValueEditGlobally=e},expression:"tagValueEditGlobally"}})],1),t.longProcessInDialogs?r("v-progress-linear",{attrs:{indeterminate:""}}):t._e(),r("v-divider"),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.onEditTagOKClicked()}}},[t._v("تأیید")]),r("v-btn",{attrs:{color:"secondary",text:""},on:{click:function(e){t.editingTagType=!1}}},[t._v("انصراف")])],1)],1)],1)],1):t._e(),t.checkPermission("artifact","edittag")?r("v-layout",{attrs:{"justify-center":""}},[r("v-dialog",{attrs:{width:"500"},model:{value:t.editingTagValue,callback:function(e){t.editingTagValue=e},expression:"editingTagValue"}},[r("v-card",[r("v-card-text",[r("v-textarea",{attrs:{label:"ویژگی","auto-grow":"",rows:"10"},model:{value:t.tagValue,callback:function(e){t.tagValue=e},expression:"tagValue"}})],1),r("v-card-text",[r("v-text-field",{attrs:{label:"نشانی جستجو"},model:{value:t.tagValueUrl,callback:function(e){t.tagValueUrl=e},expression:"tagValueUrl"}})],1),r("v-card-text",[r("v-text-field",{attrs:{label:"پیوند"},model:{value:t.tagValueLink,callback:function(e){t.tagValueLink=e},expression:"tagValueLink"}})],1),r("v-card-text",[r("v-checkbox",{attrs:{label:"همه مقادیر یکسان تغییر کنند"},model:{value:t.tagValueEditGlobally,callback:function(e){t.tagValueEditGlobally=e},expression:"tagValueEditGlobally"}})],1),t.longProcessInDialogs?r("v-progress-linear",{attrs:{indeterminate:""}}):t._e(),r("v-divider"),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.onEditTagValueOKClicked()}}},[t._v("تأیید")]),r("v-btn",{attrs:{color:"secondary",text:""},on:{click:function(e){t.editingTagValue=!1}}},[t._v("انصراف")])],1)],1)],1)],1):t._e()],1),t.item.contents.length>0?r("v-tab-item",{attrs:{value:"tab-3"}},[r("v-simple-table",[r("tbody",t._l(t.item.contents,function(e){return r("tr",{key:e.order},[r("td",[r("p",{style:"font-size:1."+e.level+"em"},[r("router-link",{attrs:{to:"/items/"+t.item.friendlyUrl+"/"+e.itemFriendlyUrl}},[t._v("\n                                                "+t._s(e.title)+"\n                                            ")])],1)])])}),0)])],1):t._e(),null!=t.userInfo?r("v-tab-item",{attrs:{value:"tab-4"}},[t.loadingPrivateNotes?r("v-flex",{attrs:{xs12:""}},[r("v-card",{attrs:{dark:"",color:"secondary"}},[r("v-progress-circular",{attrs:{indeterminate:""}})],1)],1):t._e(),t._l(t.mynotes,function(e){return r("v-card",{key:e.id},[r("v-card-text",{domProps:{innerHTML:t._s(e.htmlContent)}}),r("v-card-actions",[r("small",{domProps:{innerHTML:t._s(e.dateTime)}}),r("v-spacer"),r("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(a){var n=a.on;return[r("v-btn",t._g({attrs:{text:"",icon:"",color:"blue"},on:{click:function(r){return t.editCurrentNote(e,"private")}}},n),[r("v-icon",[t._v("edit")])],1)]}}],null,!0)},[r("span",[t._v("اصلاح")])]),t.editingPrivateNote?r("v-layout",{attrs:{"justify-center":""}},[r("v-dialog",{attrs:{width:"500"},model:{value:t.editingPrivateNote,callback:function(e){t.editingPrivateNote=e},expression:"editingPrivateNote"}},[r("v-card",[r("v-textarea",{attrs:{"auto-grow":"",outlined:"",rounded:""},model:{value:t.newNote,callback:function(e){t.newNote=e},expression:"newNote"}}),t.longProcessInDialogs?r("v-progress-linear",{attrs:{indeterminate:""}}):t._e(),r("v-divider"),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.onEditNoteOKClicked()}}},[t._v("تأیید")]),r("v-btn",{attrs:{color:"secondary",text:""},on:{click:function(e){t.editingPrivateNote=!1}}},[t._v("انصراف")])],1)],1)],1)],1):t._e(),r("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(a){var n=a.on;return[r("v-btn",t._g({attrs:{text:"",icon:"",color:"red"},on:{click:function(r){return t.deleteNote(e)}}},n),[r("v-icon",[t._v("delete")])],1)]}}],null,!0)},[r("span",[t._v("حذف")])])],1)],1)}),r("v-card",{attrs:{dark:""}},[t.writingPrivateNote?t._e():r("v-card-text",[r("v-btn",{attrs:{text:""},on:{click:function(e){t.writingPrivateNote=!0}}},[t._v("\n                                    یادداشت جدید "),r("v-icon",[t._v("add")])],1)],1),t.writingPrivateNote?r("v-card-text",[r("v-textarea",{attrs:{"auto-grow":"",outlined:"",rounded:""},model:{value:t.newNote,callback:function(e){t.newNote=e},expression:"newNote"}}),r("v-btn",{attrs:{text:""},on:{click:function(e){return t.saveNewNote("private")}}},[t._v("\n                                    ذخیره "),r("v-icon",[t._v("save")])],1),r("v-btn",{attrs:{text:""},on:{click:function(e){t.writingPrivateNote=!1}}},[t._v("\n                                    انصراف "),r("v-icon",[t._v("cancel")])],1)],1):t._e()],1)],2):t._e(),r("v-tab-item",{attrs:{value:"tab-5"}},[t.loadingPublicNotes?r("v-flex",{attrs:{xs12:""}},[r("v-card",{attrs:{dark:"",color:"secondary"}},[r("v-progress-circular",{attrs:{indeterminate:""}})],1)],1):t._e(),null!=t.publicnotes?r("NotesThread",{attrs:{entity:"artifact",notes:t.publicnotes,hashNoteId:t.hashNoteId,itemId:t.item.id,level:0}}):t._e()],1)],1):t._e()],1),r("v-card",[r("div",{staticClass:"text-center"},[r("v-pagination",{attrs:{length:t.pageCount,"total-visible":"10",circle:"","prev-icon":"mdi-menu-right","next-icon":"mdi-menu-left"},on:{input:t.pageNumberChanged},model:{value:t.pageNumber,callback:function(e){t.pageNumber=e},expression:"pageNumber"}})],1)]),r("v-card",[null!=t.pageItems?r("v-container",{attrs:{"grid-list-sm":"",fluid:""}},[r("v-layout",{attrs:{row:"",wrap:""}},t._l(t.pageItems,function(e){return r("v-flex",{key:e.id,attrs:{"d-flex":""}},[r("v-card",{staticClass:"d-flex",attrs:{flat:"",tile:""}},[r("router-link",{attrs:{to:"/items/"+t.item.friendlyUrl+"/"+e.friendlyUrl}},[r("v-img",{staticClass:"grey lighten-2 clickable",attrs:{src:t.appConfig.$api_url+"/api/images/thumb/"+e.images[0].id+".jpg","max-width":"200px","max-height":"400px"},scopedSlots:t._u([{key:"placeholder",fn:function(){return[r("v-layout",{attrs:{"fill-height":"","align-center":"","justify-center":"","ma-0":""}},[r("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!0)},[r("v-chip",{attrs:{outlined:"",color:"white"}},[t._v(t._s(e.order)),r("v-icon",{attrs:{dark:""}},[t._v("remove_red_eye")])],1)],1)],1)],1)],1)}),1)],1):t._e()],1)],1)],1)],1)},w=[],T=(r("495d"),r("8485"),r("5a5f"),function(){function t(){Object(c["a"])(this,t)}return Object(u["a"])(t,null,[{key:"check",value:function(t,e,r){if(null!=t)for(var a=t.securableItem,n=0;n<a.length;n++)if(a[n].shortName===e)for(var i=0;i<a[n].operations.length;i++)if(a[n].operations[i].shortName===r)return a[n].operations[i].status;return!1}}]),t}()),C=(r("fe4b"),function(){function t(){Object(c["a"])(this,t)}return Object(u["a"])(t,null,[{key:"replaceAll",value:function(t,e,r){return t.replace(new RegExp(e,"g"),r)}},{key:"replaceArray",value:function(t,e,r){for(var a=0;a<e.length;a++)t=t.replace(new RegExp(e[a],"g"),r);return t}}]),t}()),j=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"notes-thread"},[r("v-treeview",{attrs:{items:t.publicnotes,activatable:"","item-key":"id","item-text":"userName"},scopedSlots:t._u([{key:"prepend",fn:function(e){var a=e.item;return[r("v-flex",{attrs:{xs12:""}},[r("v-card",{attrs:{color:t.publicNoteColor(a)}},[r("v-card-text",[r("small",[r("a",{attrs:{name:""+a.id,href:"#"+a.id}},[t._v("#")])])]),r("v-card-text",[null==a.rUserImageId?r("v-icon",{staticClass:"centeredimg",attrs:{size:"60"}},[t._v("account_circle")]):t._e(),null!=a.rUserImageId?r("v-img",{staticClass:"centeredimg",attrs:{"max-width":"60","max-height":"60",src:t.appConfig.$api_url+"/api/rimages/"+a.rUserImageId+".jpg"}}):t._e(),r("br"),r("small",[t._v(t._s(a.userName))])],1),r("v-card-text",{domProps:{innerHTML:t._s(a.htmlContent)}}),r("v-card-actions",[r("small",{domProps:{innerHTML:t._s(a.dateTime)}}),r("v-spacer"),null!=t.userInfo&&t.userInfo.user.id===a.rAppUserId?r("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[r("v-btn",t._g({attrs:{text:"",icon:"",color:"blue"},on:{click:function(e){return t.editCurrentNote(a,"public")}}},n),[r("v-icon",[t._v("edit")])],1)]}}],null,!0)},[r("span",[t._v("اصلاح")])]):t._e(),t.editingPublicNote?r("v-layout",{attrs:{"justify-center":""}},[r("v-dialog",{attrs:{width:"500"},model:{value:t.editingPublicNote,callback:function(e){t.editingPublicNote=e},expression:"editingPublicNote"}},[r("v-card",[r("v-textarea",{attrs:{"auto-grow":"",outlined:"",rounded:""},model:{value:t.newNote,callback:function(e){t.newNote=e},expression:"newNote"}}),r("v-divider"),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.onEditNoteOKClicked()}}},[t._v("تأیید")]),r("v-btn",{attrs:{color:"secondary",text:""},on:{click:function(e){t.editingPublicNote=!1}}},[t._v("انصراف")])],1)],1)],1)],1):t._e(),null==t.userInfo||t.userInfo.user.id!==a.rAppUserId&&!t.checkPermission("note","moderate")?t._e():r("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[r("v-btn",t._g({attrs:{text:"",icon:"",color:"red"},on:{click:function(e){return t.deleteNote(a)}}},n),[r("v-icon",[t._v("delete")])],1)]}}],null,!0)},[r("span",[t._v("حذف")])]),null!=t.userInfo?r("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[r("v-btn",t._g({attrs:{text:"",icon:"",color:"green"},on:{click:function(e){t.replyingTo=a.id}}},n),[r("v-icon",[t._v("reply")])],1)]}}],null,!0)},[r("span",[t._v("نوشتن پاسخ")])]):t._e()],1),0!=a.notes.length?r("NotesThread",{attrs:{entity:t.entity,notes:a.notes,hashNoteId:t.hashNoteId,itemId:t.itemId,level:t.level+1,imageId:t.imageId}}):t._e(),t.replyingTo===a.id?r("v-card-text",[r("v-card",[r("v-card-text",[r("v-textarea",{attrs:{"auto-grow":"",outlined:"",rounded:""},model:{value:t.newNote,callback:function(e){t.newNote=e},expression:"newNote"}}),null!=t.imageId?r("v-btn",{attrs:{text:""},on:{click:function(e){t.insertCroppedImage=!0}}},[t._v("\n                                    درج برش "),r("v-icon",[t._v("crop")])],1):t._e(),r("v-btn",{attrs:{text:""},on:{click:function(e){return t.saveNewNote("public",a)}}},[t._v("\n                                    ذخیره "),r("v-icon",[t._v("save")])],1),r("v-btn",{attrs:{text:""},on:{click:function(e){t.replyingTo=""}}},[t._v("\n                                    انصراف "),r("v-icon",[t._v("cancel")])],1),t.insertCroppedImage?r("v-layout",{attrs:{"justify-center":""}},[r("v-dialog",{attrs:{width:"500"},model:{value:t.insertCroppedImage,callback:function(e){t.insertCroppedImage=e},expression:"insertCroppedImage"}},[r("v-card",[r("cropper",{attrs:{classname:"cropper",src:t.appConfig.$api_url+"/api/images/thumb/"+t.imageId+".jpg","stencil-props":{aspectRatio:10/12}},on:{change:t.cropperCoordinatesChanged}}),t.longProcessInDialogs?r("v-progress-linear",{attrs:{indeterminate:""}}):t._e(),r("v-divider"),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.onCropOKClicked()}}},[t._v("تأیید")]),r("v-btn",{attrs:{color:"secondary",text:""},on:{click:function(e){t.insertCroppedImage=!1}}},[t._v("انصراف")])],1)],1)],1)],1):t._e()],1)],1)],1):t._e()],1)],1)]}}])}),null!=t.userInfo&&0==t.level?r("v-card",{attrs:{dark:""}},[t.writingPublicNote?t._e():r("v-card-text",[r("v-btn",{attrs:{text:""},on:{click:function(e){t.writingPublicNote=!0}}},[t._v("\n                یادداشت جدید "),r("v-icon",[t._v("add")])],1)],1),t.writingPublicNote?r("v-card-text",[r("v-textarea",{attrs:{"auto-grow":"",outlined:"",rounded:""},model:{value:t.newNote,callback:function(e){t.newNote=e},expression:"newNote"}}),null!=t.imageId?r("v-btn",{attrs:{text:""},on:{click:function(e){t.insertCroppedImage=!0}}},[t._v("\n                درج برش "),r("v-icon",[t._v("crop")])],1):t._e(),r("v-btn",{attrs:{text:""},on:{click:function(e){return t.saveNewNote("public")}}},[t._v("\n                ذخیره "),r("v-icon",[t._v("save")])],1),r("v-btn",{attrs:{text:""},on:{click:function(e){t.writingPublicNote=!1}}},[t._v("\n                انصراف "),r("v-icon",[t._v("cancel")])],1),t.insertCroppedImage?r("v-layout",{attrs:{"justify-center":""}},[r("v-dialog",{attrs:{width:"500"},model:{value:t.insertCroppedImage,callback:function(e){t.insertCroppedImage=e},expression:"insertCroppedImage"}},[r("v-card",[r("cropper",{attrs:{classname:"cropper",src:t.appConfig.$api_url+"/api/images/thumb/"+t.imageId+".jpg","stencil-props":{aspectRatio:10/12}},on:{change:t.cropperCoordinatesChanged}}),t.longProcessInDialogs?r("v-progress-linear",{attrs:{indeterminate:""}}):t._e(),r("v-divider"),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.onCropOKClicked()}}},[t._v("تأیید")]),r("v-btn",{attrs:{color:"secondary",text:""},on:{click:function(e){t.insertCroppedImage=!1}}},[t._v("انصراف")])],1)],1)],1)],1):t._e()],1):t._e()],1):t._e(),null==t.userInfo&&0==t.level?r("v-card",{attrs:{dark:""}},[t.writingPublicNote?t._e():r("v-card-text",[t._v("\n            برای درج یادداشت می‌بایست ابتدا با کلیک روی علامت سه خط موازی منو واقع در بالا/سمت راست صفحه ثبت نام کنید یا اگر پیش‌تر ثبت نام کرده‌اید وارد سیستم شوید.\n        ")])],1):t._e()],1)},P=[],S=(r("a120"),r("d305")),$=1,M={name:"NotesThread",components:{Cropper:S["a"]},props:{entity:String,notes:Array,hashNoteId:String,itemId:String,level:Number,imageId:String},data:function(){return{userInfo:null,publicnotes:[],writingPublicNote:!1,editingPublicNote:!1,newNote:"",replyingTo:"",longProcessInDialogs:!1,insertCroppedImage:!1,coordinates:{width:0,height:0,left:0,top:0}}},mounted:function(){var t=this;if(this.publicnotes=this.notes,localStorage.getItem("userInfo"))try{this.userInfo=JSON.parse(localStorage.getItem("userInfo"))}catch(e){this.userInfo=null}g.$on("user-logged-in",this.userLoggedIn),g.$on("user-logged-out",this.userLoggedOut),""!=this.hashNoteId?setTimeout(function(){return t.scrollTo("#"+t.hashNoteId)},$):this.hashNoteId=""},methods:{userLoggedIn:function(t){this.userInfo=t},userLoggedOut:function(){this.userInfo=null},checkPermission:function(t,e){return T.check(this.userInfo,t,e)},scrollTo:function(t){setTimeout(function(){location.href=t},$)},saveNewNote:function(t,e){var r=this;if(null!=this.userInfo)if(this.errorMsg="",""!==this.newNote){var a=0;"public"===t&&(a=1);var n="artifact"===this.entity?this.appConfig.$api_url+"/api/artifacts/note":this.appConfig.$api_url+"/api/artifacts/note/item";l()({method:"POST",url:n,data:{entityId:this.itemId,noteType:a,contents:this.newNote.replace(/\r?\n/g,"<br/>"),referenceNoteId:null==e?null:e.id},headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(a){"private"===t?r.mynotes.push(a.data):null==e?r.publicnotes.push(a.data):e.notes.push(a.data),r.newNote="",r.writingPrivateNote=!1,r.writingPublicNote=!1,r.replyingTo=""},function(t){r.errorMsg=d.handle(t)})}else this.errorMsg="متن یادداشت خالی است!"},deleteNote:function(t){var e=this;confirm("از حذف این یادداشت اطمینان دارید؟")&&(this.errorMsg="",l()({method:"DELETE",url:this.appConfig.$api_url+"/api/artifacts/note/"+t.id,data:{},headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(){0==t.noteType?e.mynotes=e.mynotes.filter(function(e){return e!=t}):e.publicnotes=e.publicnotes.filter(function(e){return e!=t})},function(t){e.errorMsg=d.handle(t)}))},editCurrentNote:function(t,e){this.writingPrivateNote||this.writingPublicNote?this.errorMsg="لطفا پس از تکمیل عملیات قبلی مجددا تلاش کنید.":(this.newNote=C.replaceArray(t.htmlContent,["<br>","<br/>","<br />"],"\r\n"),this.editNote=t,this.editingPrivateNote="private"===e,this.editingPublicNote="public"===e)},onEditNoteOKClicked:function(){var t=this;this.errorMsg="",""!==this.newNote?l()({method:"PUT",url:this.appConfig.$api_url+"/api/artifacts/note/"+this.editNote.id,data:{entityId:this.itemId,noteType:this.editNote.noteType,contents:this.newNote.replace(/\r?\n/g,"<br/>")},headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(){t.editNote.htmlContent=t.newNote.replace(/\r?\n/g,"<br/>"),t.editingPrivateNote=!1,t.editingPublicNote=!1,t.newNote=""},function(e){t.errorMsg=d.handle(e)}):this.errorMsg="متن یادداشت خالی است!"},publicNoteColor:function(t){return t.id===this.hashNoteId?"#952175":""},cropperCoordinatesChanged:function(t){var e=t.coordinates;this.coordinates=e},onCropOKClicked:function(){var t=this;this.longProcessInDialogs=!0,l()({method:"GET",url:this.appConfig.$api_url+"/api/images/cropped/"+this.imageId+"?left="+this.coordinates.left+"&top="+this.coordinates.top+"&width="+this.coordinates.width+"&height="+this.coordinates.height,data:{},headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(e){t.newNote+="\r\n",t.newNote+='<img src="',t.newNote+=t.appConfig.$api_url+"/api/rimages/",t.newNote+=e.data.id,t.newNote+='.jpg" alt = "برش تصویر" />',t.insertCroppedImage=!1,t.longProcessInDialogs=!1},function(e){t.insertCroppedImage=!1,t.longProcessInDialogs=!1,t.errorMsg=d.handle(e)})}}},U=M,O=Object(v["a"])(U,j,P,!1,null,"238d4537",null),E=O.exports,A={name:"Artifact",components:{NotesThread:E},data:function(){return{userInfo:null,item:null,pageItems:null,pageSize:21,pageNumber:1,pageCount:0,editingName:!1,editingDescription:!1,editingTagType:!1,editingTagValue:!1,errorMsg:"",itemName:"",itemUrl:"",itemStatus:{text:"",value:-1},statusArray:[{text:"پیش‌نویس",value:0},{text:"در انتظار بازبینی",value:1},{text:"رد شده",value:2},{text:"منتشر شده",value:4},{text:"دسترسی محدود",value:8}],addingTagType:!1,addPredefinedTag:!0,newTag:null,tagsArray:[],tagObject:null,tagTypeArray:[{text:"عادی",value:0},{text:"پیوند",value:1},{text:"جستجو",value:2},{text:"پیوند و جستجو",value:3},{text:"عادی چپ به راست",value:4},{text:"بدون مقدار",value:5}],tagName:"",tagPlural:"",tagType:{text:"",value:-1},tagUrl:"",tagValueObject:null,tagValue:"",tagValueUrl:"",tagValueLink:"",tagValueEditGlobally:!0,filteredTag:null,filteredTagValue:null,bookmarked:!1,bookmarkId:"",loadingPrivateNotes:!1,mynotes:[],writingPrivateNote:!1,newNote:"",editingPrivateNote:!1,editNote:null,loadingPublicNotes:!1,publicnotes:null,active_tab:"tab-1",hashNoteId:"",longProcessInDialogs:!1}},mounted:function(){if(localStorage.getItem("userInfo"))try{this.userInfo=JSON.parse(localStorage.getItem("userInfo"))}catch(t){this.userInfo=null}g.$on("user-logged-in",this.userLoggedIn),g.$on("user-logged-out",this.userLoggedOut),""!=this.$route.hash&&(this.active_tab="tab-5"),this.loadArtifact()},methods:{loadArtifact:function(){var t,e=this;null==this.userInfo?(t=this.appConfig.$api_url+"/api/artifacts/"+this.$route.params.friendlyUrl,null!=this.$route.params.tag&&(t+="/filteritemsbytag/"+this.$route.params.tag,null!=this.$route.params.value&&(t+="/"+this.$route.params.value)),l()({method:"GET",url:t,data:{},headers:{"content-type":"application/json"}}).then(function(t){e.processArtifactResult(t)},function(t){e.errorMsg=d.handle(t)})):(t=this.appConfig.$api_url+"/api/artifacts/secure/"+this.$route.params.friendlyUrl,null!=this.$route.params.tag&&(t+="/filteritemsbytag/"+this.$route.params.tag,null!=this.$route.params.value&&(t+="/"+this.$route.params.value)),l()({method:"GET",url:t,data:{},headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(t){e.processArtifactResult(t)},function(t){e.errorMsg=d.handle(t)}))},processArtifactResult:function(t){var e=this;this.item=t.data,this.pageNumber=1,null!=this.$route.params.pageno&&(this.pageNumber=parseInt(this.$route.params.pageno));var r=[];if(null!=this.$route.params.tag){for(var a=0;a<this.item.items.length;a++)r.push(this.item.items[a]);this.pageItems=r,this.pageCount=1}else{for(var n=(this.pageNumber-1)*this.pageSize;n<Math.min(this.pageNumber*this.pageSize,this.item.items.length);n++)r.push(this.item.items[n]);this.pageItems=r,this.pageCount=this.item.items.length%this.pageSize==0?parseInt(this.item.items.length/this.pageSize,10):parseInt(this.item.items.length/this.pageSize,10)+1}this.itemName=this.item.name,this.itemUrl=this.item.friendlyUrl;for(var i=0;i<this.statusArray.length;i++)if(this.statusArray[i].value===this.item.status){this.itemStatus=this.statusArray[i];break}this.itemDescription=C.replaceArray(this.item.description,["<br>","<br/>","<br />"],"\r\n"),this.errorMsg="",this.loadingPublicNotes=!0,l()({method:"GET",url:this.appConfig.$api_url+"/api/artifacts/note/"+this.item.id,data:{},headers:{"content-type":"application/json"}}).then(function(t){e.publicnotes=t.data,e.loadingPublicNotes=!1,e.$route.hash?e.hashNoteId=e.$route.hash.substring(1):e.hashNoteId=""},function(t){e.errorMsg=d.handle(t)}),this.bookmarked=!1,this.bookmarkId="",null!=this.userInfo&&l()({method:"GET",url:this.appConfig.$api_url+"/api/artifacts/bookmark/"+this.item.id,data:{},headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(t){for(var r=0;r<t.data.length;r++)0==t.data[r].rBookmarkType&&(e.bookmarked=!0,e.bookmarkId=t.data[r].id);e.loadingPrivateNotes=!0,l()({method:"GET",url:e.appConfig.$api_url+"/api/artifacts/note/private/"+e.item.id,data:{},headers:{authorization:"bearer "+e.userInfo.token,"content-type":"application/json"}}).then(function(t){e.mynotes=t.data,e.loadingPrivateNotes=!1},function(t){e.errorMsg=d.handle(t)})},function(t){e.errorMsg=d.handle(t)}),null!=this.$route.params.tag?l()({method:"GET",url:this.appConfig.$api_url+"/api/artifacts/tag/"+this.$route.params.tag,data:{},headers:{"content-type":"application/json"}}).then(function(t){e.filteredTag=t.data,null!=e.$route.params.value?(e.errorMsg="",l()({method:"GET",url:e.appConfig.$api_url+"/api/artifacts/tagvalue/"+e.filteredTag.id+"/"+e.$route.params.value,data:{},headers:{"content-type":"application/json"}}).then(function(t){e.filteredTagValue=t.data,e.setPageTitle()},function(t){e.errorMsg=d.handle(t)})):e.setPageTitle()},function(t){e.errorMsg=d.handle(t)}):this.setPageTitle()},setPageTitle:function(){var t="گنجینهٔ گنجور";null!=this.item&&(t+=" - "+this.item.name,null!=this.filteredTag&&(t+=" - "+this.filteredTag.name),null!=this.filteredTagValue&&(t+=" - "+this.filteredTagValue.value)),document.title=t},pageNumberChanged:function(t){for(var e=[],r=(this.pageNumber-1)*this.pageSize;r<Math.min(this.pageNumber*this.pageSize,this.item.items.length);r++)e.push(this.item.items[r]);this.pageItems=e,this.$router.push("/items/"+this.item.friendlyUrl+"/pageno/"+t)},coverImageClicked:function(){null!=this.$route.params.tag?this.$router.push("/items/"+this.item.friendlyUrl):(this.pageNumber=1,this.pageNumberChanged(1))},userLoggedIn:function(t){this.userInfo=t},userLoggedOut:function(){this.userInfo=null},onEditNameOKClicked:function(){var t=this;this.item.name=this.itemName,this.item.friendlyUrl=this.itemUrl,this.item.status=this.itemStatus.value,this.errorMsg="",this.longProcessInDialogs=!0,l()({method:"PUT",url:this.appConfig.$api_url+"/api/artifacts/"+this.item.id,data:this.item,headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(){t.editingName=!1,t.longProcessInDialogs=!1},function(e){t.editingName=!1,t.longProcessInDialogs=!1,t.errorMsg=d.handle(e)})},onEditDescriptionOKClicked:function(){var t=this;this.item.description=this.itemDescription.replace(/\r?\n/g,"<br/>"),this.errorMsg="",this.longProcessInDialogs=!0,l()({method:"PUT",url:this.appConfig.$api_url+"/api/artifacts/"+this.item.id,data:this.item,headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(){t.longProcessInDialogs=!1,t.editingDescription=!1},function(e){t.longProcessInDialogs=!1,t.editingDescription=!1,t.errorMsg=d.handle(e)})},addTag:function(t){var e=this;this.tagObject=t,this.tagName="",this.errorMsg="",l()({method:"GET",url:this.appConfig.$api_url+"/api/artifacts/tag",data:{},headers:{"content-type":"application/json"}}).then(function(t){if(e.tagsArray=t.data,null!=e.tagObject)for(var r=0;r<e.tagsArray.length;r++)if(e.tagObject.id==e.tagsArray[r].id){e.newTag=e.tagsArray[r];break}null==e.newTag&&e.tagsArray.length>0&&(e.newTag=e.tagsArray[0]),e.addPredefinedTag=!0,e.addingTagType=!0},function(t){e.errorMsg=d.handle(t)})},onAddTagOKClicked:function(){var t=this;this.addPredefinedTag?this.addTagValue(this.newTag):(this.longProcessInDialogs=!0,l()({method:"POST",url:this.appConfig.$api_url+"/api/artifacts/tag",data:{name:this.tagName},headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(e){t.longProcessInDialogs=!1,t.addTagValue(e.data)},function(e){t.longProcessInDialogs=!1,t.errorMsg=d.handle(e)}))},addTagValue:function(t){var e=this;this.longProcessInDialogs=!0,l()({method:"POST",url:this.appConfig.$api_url+"/api/artifacts/tagvalue/"+this.item.id,data:t,headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(){e.longProcessInDialogs=!1,e.addingTagType=!1,e.loadArtifact()},function(t){e.longProcessInDialogs=!1,e.errorMsg=d.handle(t)})},editTag:function(t){this.tagObject=t,this.tagName=this.tagObject.name,this.tagPlural=this.tagObject.pluralName;for(var e=0;e<this.tagTypeArray.length;e++)if(this.tagTypeArray[e].value===this.tagObject.tagType){this.tagType=this.tagTypeArray[e];break}this.tagUrl=this.tagObject.friendlyUrl,this.tagValueEditGlobally=this.tagObject.globalValue,this.editingTagType=!0},moveTag:function(t,e){var r=this;this.errorMsg="",l()({method:"PUT",url:this.appConfig.$api_url+"/api/artifacts/tag/move/"+t.id+"/in/"+this.item.id+"/"+e,data:{},headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(){r.loadArtifact()},function(t){r.errorMsg=d.handle(t)})},removeTagValue:function(t){var e=this;confirm("از حذف این مقدار ویژگی اطمینان دارید؟")&&(this.errorMsg="",l()({method:"DELETE",url:this.appConfig.$api_url+"/api/artifacts/tagvalue/"+this.item.id+"/"+t.id,data:{},headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(){e.loadArtifact()},function(t){e.errorMsg=d.handle(t)}))},moveValue:function(t,e){var r=this;this.errorMsg="",l()({method:"PUT",url:this.appConfig.$api_url+"/api/artifacts/tagvalue/"+this.item.id+"/"+t.rTagId+"/"+t.id+"/move/"+e,data:{},headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(){r.loadArtifact()},function(t){r.errorMsg=d.handle(t)})},onEditTagOKClicked:function(){var t=this;this.tagObject.name=this.tagName,this.tagObject.pluralName=this.tagPlural,this.tagObject.friendlyUrl=this.tagUrl,this.tagObject.tagType=this.tagType.value,this.tagObject.globalValue=this.tagValueEditGlobally,this.errorMsg="",this.longProcessInDialogs=!0,l()({method:"PUT",url:this.appConfig.$api_url+"/api/artifacts/tag/"+this.tagObject.id,data:this.tagObject,headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(){t.longProcessInDialogs=!1,t.editingTagType=!1},function(e){t.longProcessInDialogs=!1,t.editingTagType=!1,t.errorMsg=d.handle(e)})},editTagValue:function(t,e){this.tagValueObject=t,this.tagValue=C.replaceArray(this.tagValueObject.value,["<br>","<br/>","<br />"],"\r\n"),this.tagValueUrl=this.tagValueObject.friendlyUrl,this.tagValueLink=this.tagValueObject.valueSupplement,this.tagValueEditGlobally=e.globalValue,this.editingTagValue=!0},onEditTagValueOKClicked:function(){var t=this;this.tagValueObject.value=this.tagValue.replace("\r\n","<br/>"),this.tagValueObject.friendlyUrl=this.tagValueUrl,this.tagValueObject.valueSupplement=this.tagValueLink,this.errorMsg="",this.longProcessInDialogs=!0,l()({method:"PUT",url:this.appConfig.$api_url+"/api/artifacts/tagvalue/"+this.item.id+"/"+this.tagValueEditGlobally.toString(),data:this.tagValueObject,headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(){t.longProcessInDialogs=!1,t.editingTagValue=!1},function(e){t.longProcessInDialogs=!1,t.editingTagValue=!1,t.errorMsg=d.handle(e)})},getFormattedValue:function(t,e){switch(e.tagType){case 2:case 3:return'<a href="/tags/'+e.friendlyUrl+"/"+t.friendlyUrl+'">'+t.value+"</a>"}return t.value},checkPermission:function(t,e){return T.check(this.userInfo,t,e)},bookmark:function(){var t=this;this.errorMsg="",this.bookmarked?l()({method:"DELETE",url:this.appConfig.$api_url+"/api/artifacts/bookmark/"+this.bookmarkId,data:{},headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(){t.bookmarked=!1,t.bookmarkId=""},function(e){t.errorMsg=d.handle(e)}):l()({method:"POST",url:this.appConfig.$api_url+"/api/artifacts/bookmark/"+this.item.id,data:{},headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(e){t.bookmarked=!0,t.bookmarkId=e.data.id},function(e){t.errorMsg=d.handle(e)})},getbookmarkIcon:function(){return this.bookmarked?"star":"star_border"},getbookmarkTooltip:function(){return this.bookmarked?"حذف نشان":"نشان کردن"},saveNewNote:function(t){var e=this;if(null!=this.userInfo)if(this.errorMsg="",""!==this.newNote){var r=0;"public"===t&&(r=1),l()({method:"POST",url:this.appConfig.$api_url+"/api/artifacts/note",data:{entityId:this.item.id,noteType:r,contents:this.newNote.replace(/\r?\n/g,"<br/>")},headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(r){"private"===t?e.mynotes.push(r.data):e.publicnotes.push(r.data),e.newNote="",e.writingPrivateNote=!1,e.writingPublicNote=!1},function(t){e.errorMsg=d.handle(t)})}else this.errorMsg="متن یادداشت خالی است!"},deleteNote:function(t){var e=this;confirm("از حذف این یادداشت اطمینان دارید؟")&&(this.errorMsg="",l()({method:"DELETE",url:this.appConfig.$api_url+"/api/artifacts/note/"+t.id,data:{},headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(){0==t.noteType?e.mynotes=e.mynotes.filter(function(e){return e!=t}):e.publicnotes=e.publicnotes.filter(function(e){return e!=t})},function(t){e.errorMsg=d.handle(t)}))},editCurrentNote:function(t,e){this.writingPrivateNote||this.writingPublicNote?this.errorMsg="لطفا پس از تکمیل عملیات قبلی مجددا تلاش کنید.":(this.newNote=C.replaceArray(t.htmlContent,["<br>","<br/>","<br />"],"\r\n"),this.editNote=t,this.editingPrivateNote="private"===e,this.editingPublicNote="public"===e)},onEditNoteOKClicked:function(){var t=this;this.errorMsg="",""!==this.newNote?(this.longProcessInDialogs=!0,l()({method:"PUT",url:this.appConfig.$api_url+"/api/artifacts/note/"+this.editNote.id,data:{entityId:this.item.id,noteType:this.editNote.noteType,contents:this.newNote.replace(/\r?\n/g,"<br/>")},headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(){t.longProcessInDialogs=!1,t.editNote.htmlContent=t.newNote.replace(/\r?\n/g,"<br/>"),t.editingPrivateNote=!1,t.editingPublicNote=!1,t.newNote=""},function(e){t.longProcessInDialogs=!1,t.errorMsg=d.handle(e)})):this.errorMsg="متن یادداشت خالی است!"},publicNoteColor:function(t){return t.id===this.hashNoteId?"#952175":""},showCoverImage:function(){null!=this.item&&this.$router.push("/items/"+this.item.friendlyUrl+"/"+this.item.items[this.item.coverItemIndex].friendlyUrl)},deleteArtifact:function(){var t=this;confirm("از حذف این شیء اطمینان دارید؟")&&(this.errorMsg="",l()({method:"DELETE",url:this.appConfig.$api_url+"/api/artifacts/"+this.item.id,data:{},headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(){alert("حذف انجام شد. لطفا صفحه را رفرش کنید.")},function(e){t.errorMsg=d.handle(e)}))}},watch:{$route:function(){this.loadArtifact()}}},L=A,V=(r("5957"),Object(v["a"])(L,N,w,!1,null,"6e5eaed2",null)),z=V.exports,D=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{attrs:{"grid-list-md":"","text-center":""}},[r("v-layout",{attrs:{wrap:""}},[t.longProcessOnGoing?r("v-flex",{attrs:{xs12:""}},[r("v-card",{attrs:{dark:"",color:"secondary"}},[r("v-progress-circular",{attrs:{indeterminate:""}})],1)],1):t._e(),""!=t.errorMsg?r("v-flex",{attrs:{xs12:""}},[r("v-card",[r("v-card-text",[t._v(t._s(t.errorMsg))])],1)],1):t._e(),r("v-flex",{attrs:{xs4:""}},[null!=t.item?r("v-card",{attrs:{light:""}},[r("v-card-text",[r("router-link",{attrs:{to:"/items/"+t.item.parentFriendlyUrl}},[r("v-img",{staticClass:"grey lighten-2 clickable coverImage",attrs:{src:t.appConfig.$api_url+"/api/images/thumb/"+t.item.parentImageId+".jpg",alt:""+t.item.parentName,"max-width":"200px"},scopedSlots:t._u([{key:"placeholder",fn:function(){return[r("v-layout",{attrs:{"fill-height":"","align-center":"","justify-center":"","ma-0":""}},[r("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!1,1258913907)})],1)],1),r("v-card",{attrs:{dark:""}},[null!=t.item?r("v-card-text",[t._v("\n                        تصویر "+t._s(t.item.item.order)+" از "+t._s(t.item.parentItemCount)+" "),r("router-link",{attrs:{to:"/items/"+t.item.parentFriendlyUrl}},[t._v(t._s(t.item.parentName))]),r("a",{attrs:{href:""+t.getViewerUrl()}},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("v-chip",t._g({staticClass:"clickable",attrs:{outlined:"",color:"white"}},a),[r("v-icon",{attrs:{dark:""}},[t._v("local_library")])],1)]}}],null,!1,1707419226)},[r("span",[t._v("مشاهده در نمای کتابخوان")])])],1),null!=t.userInfo?r("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("v-btn",t._g({attrs:{text:"",icon:"",color:"yellow"},on:{click:function(e){return t.bookmark()}}},a),[r("v-icon",[t._v(t._s(t.getbookmarkIcon()))])],1)]}}],null,!1,1489931996)},[r("span",[t._v(t._s(t.getbookmarkTooltip()))])]):t._e(),null!=t.userInfo?r("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("v-btn",t._g({attrs:{text:"",icon:"",color:"white"},on:{click:function(e){t.ganjoorLink=!0}}},a),[r("v-icon",[t._v("language")])],1)]}}],null,!1,4015569964)},[r("span",[t._v("پیشنهاد شعر مرتبط در گنجور")])]):t._e(),t.checkPermission("artifact","modify")?r("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("v-btn",t._g({attrs:{text:"",icon:"",color:"white"},on:{click:function(e){return t.cover()}}},a),[r("v-icon",[t._v("image")])],1)]}}],null,!1,2863956612)},[r("span",[t._v("تصویر جلد کتاب شود")])]):t._e()],1):t._e()],1)],1):t._e(),null!=t.item?r("v-layout",{attrs:{wrap:""}},[r("v-flex",{attrs:{xs6:""}},[""!=t.item.previousItemFriendlyUrl?r("v-card",[r("v-card-text",[r("router-link",{attrs:{to:"/items/"+t.item.parentFriendlyUrl+"/"+t.item.previousItemFriendlyUrl}},[r("v-img",{staticClass:"grey lighten-2 clickable coverImage",attrs:{src:t.appConfig.$api_url+"/api/images/thumb/"+t.item.prevItemImageId+".jpg",alt:"قبلی","max-width":"100px"},scopedSlots:t._u([{key:"placeholder",fn:function(){return[r("v-layout",{attrs:{"fill-height":"","align-center":"","justify-center":"","ma-0":""}},[r("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!1,1258913907)})],1),r("router-link",{attrs:{to:"/items/"+t.item.parentFriendlyUrl+"/"+t.item.previousItemFriendlyUrl}},[t._v("\n                                قبلی\n                            ")])],1)],1):t._e()],1),r("v-flex",{attrs:{xs6:""}},[""!=t.item.nextItemFriendlyUrl?r("v-card",[r("v-card-text",[r("router-link",{attrs:{to:"/items/"+t.item.parentFriendlyUrl+"/"+t.item.nextItemFriendlyUrl}},[r("v-img",{staticClass:"grey lighten-2 clickable coverImage",attrs:{src:t.appConfig.$api_url+"/api/images/thumb/"+t.item.nextItemImageId+".jpg",alt:"بعدی","max-width":"100px"},scopedSlots:t._u([{key:"placeholder",fn:function(){return[r("v-layout",{attrs:{"fill-height":"","align-center":"","justify-center":"","ma-0":""}},[r("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!1,1258913907)})],1),r("router-link",{attrs:{to:"/items/"+t.item.parentFriendlyUrl+"/"+t.item.nextItemFriendlyUrl}},[t._v("\n                                بعدی\n                            ")])],1)],1):t._e()],1),r("v-flex",{attrs:{xs12:""}},[r("v-card",[r("v-card-text",[r("router-link",{attrs:{to:"/items/"+t.item.parentFriendlyUrl+"/pageno/"+(Math.floor((t.item.item.order-1)/21)+1)}},[t._v("\n                                صفحهٔ "+t._s(Math.floor((t.item.item.order-1)/21)+1)+"\n                            ")])],1)],1)],1)],1):t._e()],1),r("v-flex",{attrs:{xs8:""}},[null!=t.item?r("div",[r("v-tabs",{model:{value:t.active_tab,callback:function(e){t.active_tab=e},expression:"active_tab"}},[r("v-tab",{attrs:{href:"#tab-1"}},[t._v("\n                        تصویر\n                    ")]),r("v-tab",{attrs:{href:"#tab-2"}},[t._v("\n                        ویژگیها\n                    ")]),null!=t.userInfo?r("v-tab",{attrs:{href:"#tab-3"}},[t._v("\n                        یادداشتهای شخصی\n                    ")]):t._e(),r("v-tab",{attrs:{href:"#tab-4"}},[t._v("\n                        یادداشتهای عمومی\n                    ")])],1),r("v-tabs-items",{model:{value:t.active_tab,callback:function(e){t.active_tab=e},expression:"active_tab"}},[r("v-tab-item",{attrs:{value:"tab-1"}},[r("v-flex",{attrs:{xs12:""}},[r("v-card",{attrs:{dark:"",color:"secondary"}},[""!=t.item.previousItemFriendlyUrl?r("router-link",{attrs:{to:"/items/"+t.item.parentFriendlyUrl+"/"+t.item.previousItemFriendlyUrl}},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("v-btn",t._g({attrs:{text:"",icon:"",color:"white"}},a),[r("v-icon",[t._v("navigate_next")])],1)]}}],null,!1,35751570)},[r("span",[t._v("قبلی")])])],1):t._e(),""!=t.item.nextItemFriendlyUrl?r("router-link",{attrs:{to:"/items/"+t.item.parentFriendlyUrl+"/"+t.item.nextItemFriendlyUrl}},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("v-btn",t._g({attrs:{text:"",icon:"",color:"white"}},a),[r("v-icon",[t._v("navigate_before")])],1)]}}],null,!1,4033119436)},[r("span",[t._v("بعدی")])])],1):t._e(),r("a",{attrs:{href:""+t.getViewerUrl()}},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("v-chip",t._g({staticClass:"clickable",attrs:{outlined:"",color:"white"}},a),[r("v-icon",{attrs:{dark:""}},[t._v("local_library")])],1)]}}],null,!1,1707419226)},[r("span",[t._v("مشاهده در نمای کتابخوان")])])],1),null!=t.userInfo?r("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("v-btn",t._g({attrs:{text:"",icon:"",color:"yellow"},on:{click:function(e){return t.bookmark()}}},a),[r("v-icon",[t._v(t._s(t.getbookmarkIcon()))])],1)]}}],null,!1,1489931996)},[r("span",[t._v(t._s(t.getbookmarkTooltip()))])]):t._e(),null!=t.userInfo?r("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("v-btn",t._g({attrs:{text:"",icon:"",color:"white"},on:{click:function(e){t.ganjoorLink=!0}}},a),[r("v-icon",[t._v("language")])],1)]}}],null,!1,4015569964)},[r("span",[t._v("پیشنهاد شعر مرتبط در گنجور")])]):t._e(),r("a",{attrs:{href:t.appConfig.$api_url+"/api/images/orig/"+t.item.item.images[0].id+".jpg",target:"_blank"}},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("v-btn",t._g({attrs:{text:"",icon:"",color:"white"}},a),[r("v-icon",[t._v("zoom_in")])],1)]}}],null,!1,2487070562)},[r("span",[t._v("بزرگترین اندازه")])])],1),r("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("v-btn",t._g({attrs:{text:"",icon:"",color:"white"},on:{click:function(e){return t.rotate(90)}}},a),[r("v-icon",[t._v("rotate_right")])],1)]}}],null,!1,1733134648)},[r("span",[t._v("چرخش به راست")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("v-btn",t._g({attrs:{text:"",icon:"",color:"white"},on:{click:function(e){return t.rotate(270)}}},a),[r("v-icon",[t._v("rotate_left")])],1)]}}],null,!1,2589443007)},[r("span",[t._v("چرخش به چپ")])]),0!=t.imageAngle&&t.checkPermission("artifact","modify")?r("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("v-btn",t._g({attrs:{text:"",icon:"",color:"white"},on:{click:function(e){return t.saveRotation()}}},a),[r("v-icon",[t._v("save")])],1)]}}],null,!1,3927387418)},[r("span",[t._v("ذخیرهٔ چرخش")])]):t._e(),r("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("v-btn",t._g({attrs:{text:"",icon:"",color:"white"},on:{click:function(e){return t.rotate(0)}}},a),[r("v-icon",[t._v("undo")])],1)]}}],null,!1,379510231)},[r("span",[t._v("برگشت به وضعیت پیش‌فرض تصویر")])]),t.checkPermission("artifact","modify")?r("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("v-btn",t._g({attrs:{text:"",icon:"",color:"white"},on:{click:function(e){return t.tagHasImage()}}},a),[r("v-icon",[t._v("image")])],1)]}}],null,!1,1878044550)},[r("span",[t._v("دارای نقاشی ")])]):t._e()],1)],1),r("a",{attrs:{href:t.appConfig.$api_url+"/api/images/orig/"+t.item.item.images[0].id+".jpg",target:"_blank"}},[0==t.imageAngle?r("v-img",{staticClass:"grey lighten-2 clickable coverImage",attrs:{src:t.appConfig.$api_url+"/api/images/norm/"+t.item.item.images[0].id+".jpg",alt:""+t.item.item.name}}):t._e(),r("img",{ref:"image",attrs:{src:t.appConfig.$api_url+"/api/images/norm/"+t.item.item.images[0].id+".jpg",alt:""+t.item.item.name,id:"image"}})],1)],1),r("v-tab-item",{attrs:{value:"tab-2"}},[null!=t.item?r("v-card",[r("v-card-text",[r("v-img",{staticClass:"grey lighten-2 coverImage",attrs:{src:t.appConfig.$api_url+"/api/images/thumb/"+t.item.item.images[0].id+".jpg",alt:""+t.item.item.name,"max-width":"200px"},scopedSlots:t._u([{key:"placeholder",fn:function(){return[r("v-layout",{attrs:{"fill-height":"","align-center":"","justify-center":"","ma-0":""}},[r("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!1,1258913907)})],1)],1):t._e(),t.checkPermission("tag","modify")&&0==t.item.formattedTags.length?r("v-card",[r("v-card-text",[r("v-btn",{attrs:{text:"",icon:""},on:{click:function(e){return t.addTag(null)}}},[r("v-icon",[t._v("add")])],1)],1)],1):t._e(),r("v-simple-table",[r("tbody",t._l(t.item.formattedTags,function(e){return r("tr",{key:e.id},[null==e.friendlyUrl||2!=e.tagType&&3!=e.tagType&&5!=e.tagType?t._e():r("td",[r("router-link",{attrs:{to:t.getTagLink(e)}},[t._v("\n                                            "+t._s(e.name)+"\n                                        ")])],1),null==e.friendlyUrl||2!=e.tagType&&3!=e.tagType&&5!=e.tagType?r("td",[t._v("\n                                        "+t._s(e.name)+"\n                                    ")]):t._e(),t.checkPermission("tag","modify")?r("td",[r("v-btn",{attrs:{text:"",icon:""},on:{click:function(r){return t.editTag(e)}}},[r("v-icon",[t._v("edit")])],1),r("v-btn",{attrs:{text:"",icon:""},on:{click:function(r){return t.addTag(e)}}},[r("v-icon",[t._v("add")])],1),r("v-btn",{attrs:{text:"",icon:""},on:{click:function(r){return t.moveTag(e,"up")}}},[r("v-icon",[t._v("arrow_drop_up")])],1),r("v-btn",{attrs:{text:"",icon:""},on:{click:function(r){return t.moveTag(e,"down")}}},[r("v-icon",[t._v("arrow_drop_down")])],1)],1):t._e(),r("td",[r("v-simple-table",[r("tbody",t._l(e.values,function(a){return r("tr",{key:a.id},[null==a.friendlyUrl||2!=e.tagType&&3!=e.tagType?t._e():r("td",[r("router-link",{attrs:{to:t.getTagValueLink(a,e)}},[t._v("\n                                            "+t._s(a.value)+"\n                                        ")])],1),null!=a.friendlyUrl||2!=e.tagType&&3!=e.tagType?t._e():r("td",[t._v("\n                                            "+t._s(a.value)+"\n                                    ")]),2!=e.tagType&&3!=e.tagType&&4!=e.tagType?r("td",{domProps:{innerHTML:t._s(a.value)}}):t._e(),4==e.tagType?r("td",{staticClass:"ltrvalue",domProps:{innerHTML:t._s(a.value)}}):t._e(),1==e.tagType||3==e.tagType?r("td",{staticClass:"btnedttagvalue"},[r("a",{attrs:{href:a.valueSupplement,target:"_blank"}},[r("v-btn",{attrs:{text:"",icon:"",color:"primary"}},[r("v-icon",[t._v("open_in_new")])],1)],1)]):t._e(),t.checkPermission("artifact","edittag")?r("td",{staticClass:"btnedttagvalue"},[r("v-btn",{attrs:{text:"",icon:""},on:{click:function(r){return t.editTagValue(a,e)}}},[r("v-icon",[t._v("edit")])],1),r("v-btn",{attrs:{text:"",icon:""},on:{click:function(e){return t.removeTagValue(a)}}},[r("v-icon",[t._v("delete")])],1),r("v-btn",{attrs:{text:"",icon:""},on:{click:function(e){return t.moveValue(a,"up")}}},[r("v-icon",[t._v("arrow_drop_up")])],1),r("v-btn",{attrs:{text:"",icon:""},on:{click:function(e){return t.moveValue(a,"down")}}},[r("v-icon",[t._v("arrow_drop_down")])],1)],1):t._e()])}),0)])],1)])}),0)]),t.checkPermission("tag","modify")?r("v-layout",{attrs:{"justify-center":""}},[r("v-dialog",{attrs:{width:"500"},model:{value:t.addingTagType,callback:function(e){t.addingTagType=e},expression:"addingTagType"}},[r("v-card",[r("v-card-text",[r("v-checkbox",{attrs:{label:"ویژگی از پیش تعریف شده"},model:{value:t.addPredefinedTag,callback:function(e){t.addPredefinedTag=e},expression:"addPredefinedTag"}})],1),t.addPredefinedTag?t._e():r("v-card-text",[r("v-text-field",{attrs:{label:"نام انگلیسی ویژگی"},model:{value:t.tagName,callback:function(e){t.tagName=e},expression:"tagName"}})],1),t.addPredefinedTag?r("v-card-text",[r("v-select",{attrs:{items:t.tagsArray,label:"نام ویژگی",hint:"نام ویژگی","item-text":"name","item-value":"id","persistent-hint":"","return-object":"","single-line":""},model:{value:t.newTag,callback:function(e){t.newTag=e},expression:"newTag"}})],1):t._e(),t.longProcessInDialogs?r("v-progress-linear",{attrs:{indeterminate:""}}):t._e(),r("v-divider"),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.onAddTagOKClicked()}}},[t._v("تأیید")]),r("v-btn",{attrs:{color:"secondary",text:""},on:{click:function(e){t.addingTagType=!1}}},[t._v("انصراف")])],1)],1)],1)],1):t._e(),t.checkPermission("tag","modify")?r("v-layout",{attrs:{"justify-center":""}},[r("v-dialog",{attrs:{width:"500"},model:{value:t.editingTagType,callback:function(e){t.editingTagType=e},expression:"editingTagType"}},[r("v-card",[r("v-card-text",[r("v-text-field",{attrs:{label:"نام ویژگی"},model:{value:t.tagName,callback:function(e){t.tagName=e},expression:"tagName"}})],1),r("v-card-text",[r("v-text-field",{attrs:{label:"اسم جمع"},model:{value:t.tagPlural,callback:function(e){t.tagPlural=e},expression:"tagPlural"}})],1),r("v-card-text",[r("v-select",{attrs:{items:t.tagTypeArray,label:"نوع",hint:"نوع","persistent-hint":"","return-object":"","single-line":""},model:{value:t.tagType,callback:function(e){t.tagType=e},expression:"tagType"}})],1),r("v-card-text",[r("v-text-field",{attrs:{label:"نشانی جستجو"},model:{value:t.tagUrl,callback:function(e){t.tagUrl=e},expression:"tagUrl"}})],1),r("v-card-text",[r("v-checkbox",{attrs:{label:"معمولا همه مقادیر یکسان فارغ از نوع تغییر می‌کند"},model:{value:t.tagValueEditGlobally,callback:function(e){t.tagValueEditGlobally=e},expression:"tagValueEditGlobally"}})],1),t.longProcessInDialogs?r("v-progress-linear",{attrs:{indeterminate:""}}):t._e(),r("v-divider"),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.onEditTagOKClicked()}}},[t._v("تأیید")]),r("v-btn",{attrs:{color:"secondary",text:""},on:{click:function(e){t.editingTagType=!1}}},[t._v("انصراف")])],1)],1)],1)],1):t._e(),t.checkPermission("artifact","edittag")?r("v-layout",{attrs:{"justify-center":""}},[r("v-dialog",{attrs:{width:"500"},model:{value:t.editingTagValue,callback:function(e){t.editingTagValue=e},expression:"editingTagValue"}},[r("v-card",[r("v-card-text",[r("v-textarea",{attrs:{label:"ویژگی","auto-grow":"",rows:"10"},model:{value:t.tagValue,callback:function(e){t.tagValue=e},expression:"tagValue"}})],1),r("v-card-text",[r("v-text-field",{attrs:{label:"نشانی جستجو"},model:{value:t.tagValueUrl,callback:function(e){t.tagValueUrl=e},expression:"tagValueUrl"}})],1),r("v-card-text",[r("v-text-field",{attrs:{label:"پیوند / سطح عنوان"},model:{value:t.tagValueLink,callback:function(e){t.tagValueLink=e},expression:"tagValueLink"}})],1),r("v-card-text",[r("v-checkbox",{attrs:{label:"همه مقادیر یکسان تغییر کنند"},model:{value:t.tagValueEditGlobally,callback:function(e){t.tagValueEditGlobally=e},expression:"tagValueEditGlobally"}})],1),t.longProcessInDialogs?r("v-progress-linear",{attrs:{indeterminate:""}}):t._e(),r("v-divider"),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.onEditTagValueOKClicked()}}},[t._v("تأیید")]),r("v-btn",{attrs:{color:"secondary",text:""},on:{click:function(e){t.editingTagValue=!1}}},[t._v("انصراف")])],1)],1)],1)],1):t._e()],1),null!=t.userInfo?r("v-tab-item",{attrs:{value:"tab-3"}},[t.loadingPrivateNotes?r("v-flex",{attrs:{xs12:""}},[r("v-card",{attrs:{dark:"",color:"secondary"}},[r("v-progress-circular",{attrs:{indeterminate:""}})],1)],1):t._e(),null!=t.item?r("v-card",[r("v-card-text",[r("v-img",{staticClass:"grey lighten-2 coverImage",attrs:{src:t.appConfig.$api_url+"/api/images/thumb/"+t.item.item.images[0].id+".jpg",alt:""+t.item.item.name,"max-width":"200px"},scopedSlots:t._u([{key:"placeholder",fn:function(){return[r("v-layout",{attrs:{"fill-height":"","align-center":"","justify-center":"","ma-0":""}},[r("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!1,1258913907)})],1)],1):t._e(),t._l(t.mynotes,function(e){return r("v-card",{key:e.id},[r("v-card-text",{domProps:{innerHTML:t._s(e.htmlContent)}}),r("v-card-actions",[r("small",{domProps:{innerHTML:t._s(e.dateTime)}}),r("v-spacer"),r("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(a){var n=a.on;return[r("v-btn",t._g({attrs:{text:"",icon:"",color:"blue"},on:{click:function(r){return t.editCurrentNote(e,"private")}}},n),[r("v-icon",[t._v("edit")])],1)]}}],null,!0)},[r("span",[t._v("اصلاح")])]),t.editingPrivateNote?r("v-layout",{attrs:{"justify-center":""}},[r("v-dialog",{attrs:{width:"500"},model:{value:t.editingPrivateNote,callback:function(e){t.editingPrivateNote=e},expression:"editingPrivateNote"}},[r("v-card",[r("v-textarea",{attrs:{"auto-grow":"",outlined:"",rounded:""},model:{value:t.newNote,callback:function(e){t.newNote=e},expression:"newNote"}}),t.longProcessInDialogs?r("v-progress-linear",{attrs:{indeterminate:""}}):t._e(),r("v-divider"),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.onEditNoteOKClicked()}}},[t._v("تأیید")]),r("v-btn",{attrs:{color:"secondary",text:""},on:{click:function(e){t.editingPrivateNote=!1}}},[t._v("انصراف")])],1)],1)],1)],1):t._e(),r("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(a){var n=a.on;return[r("v-btn",t._g({attrs:{text:"",icon:"",color:"red"},on:{click:function(r){return t.deleteNote(e)}}},n),[r("v-icon",[t._v("delete")])],1)]}}],null,!0)},[r("span",[t._v("حذف")])])],1)],1)}),r("v-card",{attrs:{dark:""}},[t.writingPrivateNote?t._e():r("v-card-text",[r("v-btn",{attrs:{text:""},on:{click:function(e){t.writingPrivateNote=!0}}},[t._v("\n                                    یادداشت جدید "),r("v-icon",[t._v("add")])],1)],1),t.writingPrivateNote?r("v-card-text",[r("v-textarea",{attrs:{"auto-grow":"",outlined:"",rounded:""},model:{value:t.newNote,callback:function(e){t.newNote=e},expression:"newNote"}}),r("v-btn",{attrs:{text:""},on:{click:function(e){t.insertCroppedImage=!0}}},[t._v("\n                                    درج برش "),r("v-icon",[t._v("crop")])],1),r("v-btn",{attrs:{text:""},on:{click:function(e){return t.saveNewNote("private")}}},[t._v("\n                                    ذخیره "),r("v-icon",[t._v("save")])],1),r("v-btn",{attrs:{text:""},on:{click:function(e){t.writingPrivateNote=!1}}},[t._v("\n                                    انصراف "),r("v-icon",[t._v("cancel")])],1),t.insertCroppedImage?r("v-layout",{attrs:{"justify-center":""}},[r("v-dialog",{attrs:{width:"500"},model:{value:t.insertCroppedImage,callback:function(e){t.insertCroppedImage=e},expression:"insertCroppedImage"}},[r("v-card",[r("cropper",{attrs:{classname:"cropper",src:t.appConfig.$api_url+"/api/images/thumb/"+t.item.item.images[0].id+".jpg","stencil-props":{aspectRatio:10/12}},on:{change:t.cropperCoordinatesChanged}}),t.longProcessInDialogs?r("v-progress-linear",{attrs:{indeterminate:""}}):t._e(),r("v-divider"),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.onCropOKClicked()}}},[t._v("تأیید")]),r("v-btn",{attrs:{color:"secondary",text:""},on:{click:function(e){t.insertCroppedImage=!1}}},[t._v("انصراف")])],1)],1)],1)],1):t._e()],1):t._e()],1)],2):t._e(),r("v-tab-item",{attrs:{value:"tab-4"}},[t.loadingPublicNotes?r("v-flex",{attrs:{xs12:""}},[r("v-card",{attrs:{dark:"",color:"secondary"}},[r("v-progress-circular",{attrs:{indeterminate:""}})],1)],1):t._e(),null!=t.item?r("v-card",[r("v-card-text",[r("v-img",{staticClass:"grey lighten-2 coverImage",attrs:{src:t.appConfig.$api_url+"/api/images/thumb/"+t.item.item.images[0].id+".jpg",alt:""+t.item.item.name,"max-width":"200px"},scopedSlots:t._u([{key:"placeholder",fn:function(){return[r("v-layout",{attrs:{"fill-height":"","align-center":"","justify-center":"","ma-0":""}},[r("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!1,1258913907)})],1)],1):t._e(),null!=t.publicnotes?r("NotesThread",{attrs:{entity:"artifactitem",notes:t.publicnotes,hashNoteId:t.hashNoteId,itemId:t.item.item.id,level:0,imageId:t.item.item.images[0].id}}):t._e()],1)],1)],1):t._e()])],1),r("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:t.ganjoorLink,callback:function(e){t.ganjoorLink=e},expression:"ganjoorLink"}},[r("v-card",[r("v-toolbar",{attrs:{dark:"",color:"primary"}},[r("v-btn",{attrs:{icon:"",dark:""},on:{click:function(e){t.ganjoorLink=!1}}},[r("v-icon",{attrs:{color:"red"}},[t._v("mdi-close")])],1),r("v-toolbar-title",[t._v("پیشنهاد شعر مرتبط در گنجور")]),r("div",{staticClass:"flex-grow-1"}),r("v-toolbar-items",[r("v-btn",{attrs:{dark:"",color:"green"},on:{click:function(e){return t.saveGanjoorLinkSuggestion()}}},[t._v("پیشنهاد"),r("v-icon",{attrs:{left:""}},[t._v("done")])],1)],1)],1),r("v-flex",{attrs:{xs12:""}},[r("v-card",[r("v-card-text",[t._v("\n                        در قاب سمت راست شعر مرتبط در گنجور را پیدا و مشخص کنید و در قاب سمت چپ تصویر مورد نظر را و نهایتاً روی دکمهٔ «"),r("span",{attrs:{color:"green"}},[r("strong",[t._v("پیشنهاد")])]),t._v("» کلیک کنید. می‌توانید بدون بستن پنجره این کار را برای شعرها و تصاویر بعدی تکرار کنید.\n                    ")])],1)],1),r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs6:""}},[r("iframe",{ref:"ganjoorFrame",staticStyle:{width:"50vw",height:"70vh"},attrs:{src:"/ganjoor?url=https://ganjoor.net"}})]),r("v-flex",{attrs:{xs6:""}},[null!=t.item?r("iframe",{staticStyle:{width:"50vw",height:"70vh"},attrs:{src:"/items/"+t.item.parentFriendlyUrl+"/"+t.item.item.friendlyUrl}}):t._e()])],1),r("v-flex",{attrs:{xs12:""}},[t.longProcessInDialogs?r("v-card",{attrs:{dark:"",color:"secondary"}},[r("v-progress-circular",{attrs:{indeterminate:""}})],1):t._e(),t.longProcessInDialogs?t._e():r("v-card",[r("v-card-text",[t._v("\n                        "+t._s(t.suggestionResult)+"\n                    ")])],1)],1)],1)],1)],1)},R=[],G={name:"ArtifactItem",components:{NotesThread:E,Cropper:S["a"]},data:function(){return{userInfo:null,item:null,errorMsg:"",addingTagType:!1,addPredefinedTag:!0,newTag:null,tagsArray:[],editingTagType:!1,editingTagValue:!1,tagObject:null,tagTypeArray:[{text:"عادی",value:0},{text:"پیوند",value:1},{text:"جستجو",value:2},{text:"پیوند و جستجو",value:3},{text:"عادی چپ به راست",value:4},{text:"بدون مقدار",value:5},{text:"عنوان در فهرست",value:6}],tagName:"",tagPlural:"",tagType:{text:"",value:-1},tagUrl:"",tagValueObject:null,tagValue:"",tagValueUrl:"",tagValueLink:"",tagValueEditGlobally:!0,bookmarked:!1,bookmarkId:"",loadingPrivateNotes:!1,mynotes:[],writingPrivateNote:!1,newNote:"",editingPrivateNote:!1,editNote:null,loadingPublicNotes:!1,publicnotes:null,writingPublicNote:!1,editingPublicNote:!1,active_tab:"tab-1",hashNoteId:"",longProcessInDialogs:!1,ganjoorLink:!1,suggestionResult:"",imageAngle:0,longProcessOnGoing:!0,insertCroppedImage:!1,coordinates:{width:0,height:0,left:0,top:0}}},mounted:function(){if(localStorage.getItem("userInfo"))try{this.userInfo=JSON.parse(localStorage.getItem("userInfo"))}catch(t){this.userInfo=null}g.$on("user-logged-in",this.userLoggedIn),g.$on("user-logged-out",this.userLoggedOut),""!=this.$route.hash&&(this.active_tab="tab-4"),this.loadItem()},methods:{userLoggedIn:function(t){this.userInfo=t},userLoggedOut:function(){this.userInfo=null},loadItem:function(){var t=this;this.errorMsg="",null==this.userInfo?(this.longProcessOnGoing=!0,l()({method:"GET",url:this.appConfig.$api_url+"/api/artifacts/"+this.$route.params.friendlyUrl+"/"+this.$route.params.pageUrl,data:{},headers:{"content-type":"application/json"}}).then(function(e){t.processItemResult(e)},function(e){t.longProcessOnGoing=!1,t.errorMsg=d.handle(e)})):(this.longProcessOnGoing=!0,l()({method:"GET",url:this.appConfig.$api_url+"/api/artifacts/secure/"+this.$route.params.friendlyUrl+"/"+this.$route.params.pageUrl,data:{},headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(e){t.processItemResult(e)},function(e){t.longProcessOnGoing=!1,t.errorMsg=d.handle(e)}))},processItemResult:function(t){var e=this;this.imageAngle=0,null!=this.$refs.image&&(this.$refs.image.className="hidden"),this.item=t.data,document.title="گنجینهٔ گنجور - "+this.item.parentName+" - تصویر "+this.item.item.order+" از "+this.item.parentItemCount,localStorage.setItem("parent",this.item.parentFriendlyUrl),localStorage.setItem("item",this.item.item.id),this.longProcessOnGoing=!1,this.loadingPublicNotes=!0,l()({method:"GET",url:this.appConfig.$api_url+"/api/artifacts/note/item/"+this.item.item.id,data:{},headers:{"content-type":"application/json"}}).then(function(t){e.publicnotes=t.data,e.loadingPublicNotes=!1,e.$route.hash?e.hashNoteId=e.$route.hash.substring(1):e.hashNoteId=""},function(t){e.errorMsg=d.handle(t)}),this.bookmarked=!1,this.bookmarkId="",null!=this.userInfo&&(this.errorMsg="",l()({method:"GET",url:this.appConfig.$api_url+"/api/artifacts/bookmark/item/"+this.item.item.id,data:{},headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(t){for(var r=0;r<t.data.length;r++)0==t.data[r].rBookmarkType&&(e.bookmarked=!0,e.bookmarkId=t.data[r].id);e.loadingPrivateNotes=!0,l()({method:"GET",url:e.appConfig.$api_url+"/api/artifacts/note/item/private/"+e.item.item.id,data:{},headers:{authorization:"bearer "+e.userInfo.token,"content-type":"application/json"}}).then(function(t){e.mynotes=t.data,e.loadingPrivateNotes=!1},function(t){e.errorMsg=d.handle(t)})},function(t){e.errorMsg=d.handle(t)}))},addTag:function(t){var e=this;this.tagObject=t,this.tagName="",this.errorMsg="",l()({method:"GET",url:this.appConfig.$api_url+"/api/artifacts/tag",data:{},headers:{"content-type":"application/json"}}).then(function(t){if(e.tagsArray=t.data,null!=e.tagObject)for(var r=0;r<e.tagsArray.length;r++)if(e.tagObject.id==e.tagsArray[r].id){e.newTag=e.tagsArray[r];break}null==e.newTag&&e.tagsArray.length>0&&(e.newTag=e.tagsArray[0]),e.addPredefinedTag=!0,e.addingTagType=!0},function(t){e.errorMsg=d.handle(t)})},onAddTagOKClicked:function(){var t=this;this.addPredefinedTag?this.addTagValue(this.newTag):(this.longProcessInDialogs=!0,l()({method:"POST",url:this.appConfig.$api_url+"/api/artifacts/tag",data:{name:this.tagName},headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(e){t.longProcessInDialogs=!1,t.addTagValue(e.data)},function(e){t.longProcessInDialogs=!1,t.errorMsg=d.handle(e)}))},addTagValue:function(t){var e=this;this.longProcessInDialogs=!0,l()({method:"POST",url:this.appConfig.$api_url+"/api/artifacts/itemtagvalue/"+this.item.item.id,data:t,headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(){e.longProcessInDialogs=!1,e.addingTagType=!1,e.loadItem()},function(t){e.longProcessInDialogs=!1,e.errorMsg=d.handle(t)})},editTag:function(t){this.tagObject=t,this.tagName=this.tagObject.name,this.tagPlural=this.tagObject.pluralName;for(var e=0;e<this.tagTypeArray.length;e++)if(this.tagTypeArray[e].value===this.tagObject.tagType){this.tagType=this.tagTypeArray[e];break}this.tagUrl=this.tagObject.friendlyUrl,this.tagValueEditGlobally=this.tagObject.globalValue,this.editingTagType=!0},onEditTagOKClicked:function(){var t=this;this.tagObject.name=this.tagName,this.tagObject.pluralName=this.tagPlural,this.tagObject.friendlyUrl=this.tagUrl,this.tagObject.tagType=this.tagType.value,this.tagObject.globalValue=this.tagValueEditGlobally,this.errorMsg="",this.longProcessInDialogs=!0,l()({method:"PUT",url:this.appConfig.$api_url+"/api/artifacts/tag/"+this.tagObject.id,data:this.tagObject,headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(){t.longProcessInDialogs=!1,t.editingTagType=!1},function(e){t.longProcessInDialogs=!1,t.editingTagType=!1,t.errorMsg=d.handle(e)})},moveTag:function(t,e){var r=this;this.errorMsg="",l()({method:"PUT",url:this.appConfig.$api_url+"/api/artifacts/tag/move/"+t.id+"/in/item/"+this.item.item.id+"/"+e,data:{},headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(){r.loadItem()},function(t){r.errorMsg=d.handle(t)})},editTagValue:function(t,e){this.tagValueObject=t,this.tagValue=C.replaceArray(this.tagValueObject.value,["<br>","<br/>","<br />"],"\r\n"),this.tagValueUrl=this.tagValueObject.friendlyUrl,this.tagValueLink=this.tagValueObject.valueSupplement,this.tagValueEditGlobally=e.globalValue,this.editingTagValue=!0},onEditTagValueOKClicked:function(){var t=this;this.tagValueObject.value=this.tagValue.replace("\n\r","<br/>"),this.tagValueObject.friendlyUrl=this.tagValueUrl,this.tagValueObject.valueSupplement=this.tagValueLink,this.errorMsg="",this.longProcessInDialogs=!0,l()({method:"PUT",url:this.appConfig.$api_url+"/api/artifacts/itemtagvalue/"+this.item.item.id+"/"+this.tagValueEditGlobally.toString(),data:this.tagValueObject,headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(){t.longProcessInDialogs=!1,t.editingTagValue=!1},function(e){t.longProcessInDialogs=!1,t.editingTagValue=!1,t.errorMsg=d.handle(e)})},removeTagValue:function(t){var e=this;confirm("از حذف این مقدار ویژگی اطمینان دارید؟")&&(this.errorMsg="",l()({method:"DELETE",url:this.appConfig.$api_url+"/api/artifacts/itemtagvalue/"+this.item.item.id+"/"+t.id,data:{},headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(){e.loadItem()},function(t){e.errorMsg=d.handle(t)}))},moveValue:function(t,e){var r=this;this.errorMsg="",l()({method:"PUT",url:this.appConfig.$api_url+"/api/artifacts/itemtagvalue/"+this.item.item.id+"/"+t.rTagId+"/"+t.id+"/move/"+e,data:{},headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(){r.loadItem()},function(t){r.errorMsg=d.handle(t)})},getTagLink:function(t){switch(t.tagType){case 2:case 3:case 5:return"/items/"+this.item.parentFriendlyUrl+"/tags/"+t.friendlyUrl}return""},getTagValueLink:function(t,e){switch(e.tagType){case 2:case 3:return"/items/"+this.item.parentFriendlyUrl+"/tags/"+e.friendlyUrl+"/"+t.friendlyUrl}return""},checkPermission:function(t,e){return T.check(this.userInfo,t,e)},bookmark:function(){var t=this;this.errorMsg="",this.bookmarked?l()({method:"DELETE",url:this.appConfig.$api_url+"/api/artifacts/bookmark/"+this.bookmarkId,data:{},headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(){t.bookmarked=!1,t.bookmarkId=""},function(e){t.errorMsg=d.handle(e)}):l()({method:"POST",url:this.appConfig.$api_url+"/api/artifacts/bookmark/item/"+this.item.item.id,data:{},headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(e){t.bookmarked=!0,t.bookmarkId=e.data.id},function(e){t.errorMsg=d.handle(e)})},getbookmarkIcon:function(){return this.bookmarked?"star":"star_border"},getbookmarkTooltip:function(){return this.bookmarked?"حذف نشان":"نشان کردن"},saveNewNote:function(t){var e=this;if(null!=this.userInfo)if(this.errorMsg="",""!==this.newNote){var r=0;"public"===t&&(r=1),l()({method:"POST",url:this.appConfig.$api_url+"/api/artifacts/note/item",data:{entityId:this.item.item.id,noteType:r,contents:this.newNote.replace(/\r?\n/g,"<br/>")},headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(r){"private"===t?e.mynotes.push(r.data):e.publicnotes.push(r.data),e.newNote="",e.writingPrivateNote=!1,e.writingPublicNote=!1},function(t){e.errorMsg=d.handle(t)})}else this.errorMsg="متن یادداشت خالی است!"},deleteNote:function(t){var e=this;confirm("از حذف این یادداشت اطمینان دارید؟")&&(this.errorMsg="",l()({method:"DELETE",url:this.appConfig.$api_url+"/api/artifacts/note/"+t.id,data:{},headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(){0==t.noteType?e.mynotes=e.mynotes.filter(function(e){return e!=t}):e.publicnotes=e.publicnotes.filter(function(e){return e!=t})},function(t){e.errorMsg=d.handle(t)}))},editCurrentNote:function(t,e){this.writingPrivateNote||this.writingPublicNote?this.errorMsg="لطفا پس از تکمیل عملیات قبلی مجددا تلاش کنید.":(this.newNote=C.replaceArray(t.htmlContent,["<br>","<br/>","<br />"],"\r\n"),this.editNote=t,this.editingPrivateNote="private"===e,this.editingPublicNote="public"===e)},onEditNoteOKClicked:function(){var t=this;this.errorMsg="",""!==this.newNote?l()({method:"PUT",url:this.appConfig.$api_url+"/api/artifacts/note/"+this.editNote.id,data:{entityId:this.item.item.id,noteType:this.editNote.noteType,contents:this.newNote.replace(/\r?\n/g,"<br/>")},headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(){t.editNote.htmlContent=t.newNote.replace(/\r?\n/g,"<br/>"),t.editingPrivateNote=!1,t.editingPublicNote=!1,t.newNote=""},function(e){t.errorMsg=d.handle(e)}):this.errorMsg="متن یادداشت خالی است!"},publicNoteColor:function(t){return t.id===this.hashNoteId?"#952175":""},saveGanjoorLinkSuggestion:function(){var t=this,e=C.replaceAll(C.replaceAll(this.$refs.ganjoorFrame.contentWindow.location.href.substring(this.$refs.ganjoorFrame.contentWindow.location.href.indexOf("=")+1),"%3A",":"),"%2F","/"),r=parseInt(localStorage.getItem("ganjoorPostId")),a=localStorage.getItem("ganjoorPostTitle"),n=localStorage.getItem("parent"),i=localStorage.getItem("item");this.longProcessInDialogs=!0,l()({method:"POST",url:this.appConfig.$api_url+"/api/artifacts/ganjoor",data:{ganjoorPostId:r,ganjoorUrl:e,ganjoorTitle:a,artifactFriendlyUrl:n,itemId:i},headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(e){t.longProcessInDialogs=!1,t.suggestionResult=e.data.ganjoorTitle+" <==> "+e.data.entityName},function(e){t.longProcessInDialogs=!1,t.suggestionResult=d.handle(e)})},cover:function(){var t=this;this.errorMsg="",l()({method:"PUT",url:this.appConfig.$api_url+"/api/artifacts/"+this.item.item.rArtifactMasterRecordId+"/cover",data:this.item.item.order-1,headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(){t.loadItem(),alert("تصویر تغییر یافت. لطفا F5 بزنید.")},function(e){t.error=d.handle(e)})},getViewerUrl:function(){var t=this.item.item.order-1;return t%2==0&&(t-=1),t<0?"http://viewer.ganjoor.net/"+this.item.parentFriendlyUrl:"http://viewer.ganjoor.net/"+this.item.parentFriendlyUrl+"#page/n"+t+"/mode/2up"},rotate:function(t){0==t?(this.imageAngle=0,this.$refs.image.className="hidden"):(this.imageAngle+=t,this.imageAngle=this.imageAngle%360,this.$refs.image.className="rotate"+this.imageAngle)},saveRotation:function(){var t=this;0!=this.imageAngle&&confirm("از ذخیرهٔ چرخش فعلی اطمینان دارید؟")&&(this.longProcessOnGoing=!0,this.errorMsg="",l()({method:"PUT",url:this.appConfig.$api_url+"/api/images/"+this.item.item.images[0].id+"/"+this.imageAngle.toString(),data:{},headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(){t.longProcessOnGoing=!1,t.loadItem(),alert("چرخش انجام شد. لطفا F5 بزنید.")},function(e){t.longProcessOnGoing=!1,t.error=d.handle(e)}))},tagHasImage:function(){for(var t=this,e=0;e<this.item.formattedTags.length;e++)if("illustrated"==this.item.formattedTags[e].friendlyUrl)return void alert("پیشتر ثبت شده است.");this.longProcessOnGoing=!0,l()({method:"GET",url:this.appConfig.$api_url+"/api/artifacts/tag",data:{},headers:{"content-type":"application/json"}}).then(function(e){t.tagsArray=e.data;for(var r=0;r<t.tagsArray.length;r++)if("illustrated"==t.tagsArray[r].friendlyUrl){l()({method:"POST",url:t.appConfig.$api_url+"/api/artifacts/itemtagvalue/"+t.item.item.id,data:t.tagsArray[r],headers:{authorization:"bearer "+t.userInfo.token,"content-type":"application/json"}}).then(function(){t.longProcessOnGoing=!1,alert("انجام شد. لطفا F5‌بزنید.")},function(e){t.longProcessOnGoing=!1,t.errorMsg=d.handle(e)});break}},function(e){t.longProcessOnGoing=!1,t.errorMsg=d.handle(e)})},cropperCoordinatesChanged:function(t){var e=t.coordinates;this.coordinates=e},onCropOKClicked:function(){var t=this;this.longProcessInDialogs=!0,l()({method:"GET",url:this.appConfig.$api_url+"/api/images/cropped/"+this.item.item.images[0].id+"?left="+this.coordinates.left+"&top="+this.coordinates.top+"&width="+this.coordinates.width+"&height="+this.coordinates.height,data:{},headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(e){t.newNote+="\r\n",t.newNote+='<img src="',t.newNote+=t.appConfig.$api_url+"/api/rimages/",t.newNote+=e.data.id,t.newNote+='.jpg" alt = "برش تصویر" />',t.insertCroppedImage=!1,t.longProcessInDialogs=!1},function(e){t.insertCroppedImage=!1,t.longProcessInDialogs=!1,t.errorMsg=d.handle(e)})}},watch:{$route:function(){this.loadItem()}}},F=G,B=(r("6333"),Object(v["a"])(F,D,R,!1,null,"9da5d128",null)),J=B.exports,K=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{attrs:{"grid-list-md":"","text-center":""}},[r("v-layout",{attrs:{wrap:""}},[null==t.tag?r("v-flex",{attrs:{xs12:""}},[r("v-card",{attrs:{dark:"",color:"secondary"}},[r("v-progress-circular",{attrs:{indeterminate:""}})],1)],1):t._e(),r("v-flex",{attrs:{xs4:""}},[null!=t.tag?r("v-card",{attrs:{light:""}},[r("v-card-text",[t._v("\n                    "+t._s(t.tag.pluralName)+" در گنجینهٔ گنجور\n                ")]),null!=t.tag?r("v-card-text",[t._v("\n                    "+t._s(t.tag.values.length)+" عنوان\n                ")]):t._e()],1):t._e()],1),r("v-flex",{attrs:{xs8:""}},[r("v-card",[null!=t.tag?r("v-container",{attrs:{"grid-list-sm":"",fluid:""}},[r("v-layout",{attrs:{row:"",wrap:""}},t._l(t.tag.values,function(e){return r("v-flex",{key:e.friendlyUrl,attrs:{"d-flex":""}},[r("v-card",{staticClass:"d-flex",attrs:{flat:"",dark:"",raised:""}},[r("router-link",{attrs:{to:"/tags/"+t.tag.friendlyUrl+"/"+e.friendlyUrl}},[r("v-img",{staticClass:"grey lighten-2 clickable",attrs:{src:t.appConfig.$api_url+"/api/images/thumb/"+e.imageId+".jpg",width:"200px"},scopedSlots:t._u([{key:"placeholder",fn:function(){return[r("v-layout",{attrs:{"fill-height":"","align-center":"","justify-center":"","ma-0":""}},[r("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!0)}),r("v-card-subtitle",{staticStyle:{color:"lightgray"}},[t._v("\n                                        "+t._s(e.name)+" ("+t._s(e.count)+")\n                                    ")])],1)],1)],1)}),1)],1):t._e()],1)],1)],1)],1)},H=[],q={name:"Tag",data:function(){return{tag:null,errorMsg:""}},mounted:function(){var t=this;l()({method:"GET",url:this.appConfig.$api_url+"/api/artifacts/tagbundle/"+this.$route.params.friendlyUrl,data:{},headers:{"content-type":"application/json"}}).then(function(e){t.tag=e.data,document.title="گنجینهٔ گنجور - "+t.tag.pluralName},function(e){t.errorMsg=e})},methods:{}},W=q,Q=Object(v["a"])(W,K,H,!1,null,"009937c2",null),X=Q.exports,Y=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{attrs:{"grid-list-md":"","text-center":""}},[r("v-layout",{attrs:{wrap:""}},[null==t.tag?r("v-flex",{attrs:{xs12:""}},[r("v-card",{attrs:{dark:"",color:"secondary"}},[r("v-progress-circular",{attrs:{indeterminate:""}})],1)],1):t._e(),r("v-flex",{attrs:{xs4:""}},[null!=t.tag?r("v-card",{attrs:{light:""}},[r("v-card-text",[r("router-link",{attrs:{to:"/tags/"+t.tag.friendlyUrl}},[t._v(t._s(t.tag.name))]),t._v(": "+t._s(t.tag.values[0].value)+"\n                ")],1),null!=t.items?r("v-card-text",[t._v("\n                    "+t._s(t.items.length)+" عنوان\n                ")]):t._e()],1):t._e()],1),r("v-flex",{attrs:{xs8:""}},[r("v-card",[null!=t.items?r("v-container",{attrs:{"grid-list-sm":"",fluid:""}},[r("v-layout",{attrs:{row:"",wrap:""}},t._l(t.items,function(e){return r("v-flex",{key:e.id,attrs:{"d-flex":""}},[r("v-card",{staticClass:"d-flex",staticStyle:{width:"200px"},attrs:{flat:"",raised:"",dark:""}},[r("router-link",{attrs:{to:"/items/"+e.friendlyUrl}},[r("v-img",{staticClass:"grey lighten-2 clickable",attrs:{src:t.appConfig.$api_url+"/api/images/thumb/"+e.coverImage.id+".jpg",width:"200px"},scopedSlots:t._u([{key:"placeholder",fn:function(){return[r("v-layout",{attrs:{"fill-height":"","align-center":"","justify-center":"","ma-0":""}},[r("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!0)}),r("v-card-subtitle",{staticStyle:{color:"lightgray"}},[t._v("\n                                        "+t._s(e.name)+"\n                                    ")])],1)],1)],1)}),1)],1):t._e()],1)],1)],1)],1)},Z=[],tt={name:"TagValue",data:function(){return{tag:null,items:[],itemsLength:0,loading:!0,errorMsg:""}},mounted:function(){var t=this;l()({method:"GET",url:this.appConfig.$api_url+"/api/artifacts/tagbundle/"+this.$route.params.friendlyUrl+"/"+this.$route.params.valueUrl,data:{},headers:{"content-type":"application/json"}}).then(function(e){t.tag=e.data;var r="گنجینهٔ گنجور - "+t.tag.pluralName;t.tag.values.length>0&&(r+=" - "+t.tag.values[0].value),document.title=r},function(e){t.errorMsg=e}),this.loading=!0,l()({method:"GET",url:this.appConfig.$api_url+"/api/artifacts/tagged/"+this.$route.params.friendlyUrl+"/"+this.$route.params.valueUrl,data:{},headers:{"content-type":"application/json"}}).then(function(e){t.items=e.data,t.itemsLength=t.items.length,t.loading=!1},function(e){t.errorMsg=e,t.loading=!1})},methods:{}},et=tt,rt=Object(v["a"])(et,Y,Z,!1,null,"40207f66",null),at=rt.exports,nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"signup"},[a("v-content",{staticClass:"pa-0"},[""!=t.errorMsg?a("v-flex",{attrs:{xs12:""}},[a("v-card",[a("v-card-text",[t._v("\n                    "+t._s(t.errorMsg)+"\n                ")])],1)],1):t._e(),null!==t.userInfo||t.verifying||t.finalizing||t.processing||t.finalized?t._e():a("v-layout",{attrs:{"justify-space-around":"",color:"primary"}},[a("v-card",[a("v-card-text",[a("p",[t._v("\n                        لطفا پست الکترونیکی خود را جهت ثبت نام وارد کنید:\n                    ")])]),a("v-card-text",[a("v-text-field",{staticClass:"ltrinput",attrs:{"prepend-inner-icon":"email",placeholder:"پست الکترونیکی"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),a("v-card-text",[""!=t.captchaImageId?a("v-img",{staticClass:"lighten-2",attrs:{src:t.appConfig.$api_url+"/api/rimages/"+t.captchaImageId+".jpg","max-width":"50px","max-height":"30px"}}):t._e()],1),a("v-card-text",[a("p",[t._v("\n                        عددی را که در تصویر امنیتی بالا می‌بینید در کادر زیر وارد کنید:\n                    ")]),a("v-text-field",{staticClass:"ltrinput",attrs:{"prepend-inner-icon":"lock",placeholder:"عدد تصویر امنیتی"},model:{value:t.captcha,callback:function(e){t.captcha=e},expression:"captcha"}})],1),a("v-card-text",[a("v-btn",{attrs:{color:"error"},on:{click:function(e){return t.signup()}}},[t._v("ادامه")])],1)],1)],1),t.verifying&&!t.processing?a("v-layout",{attrs:{"justify-space-around":"",color:"primary"}},[a("v-card",[""==t.secret?a("v-card-text",[a("p",[t._v("\n                        لطفا پست الکترونیکی خود را چک کنید. در صورتی که نشانی پست الکترونیکی خود را درست وارد کرده باشید نامه‌ای از گنجینهٔ گنجور دریافت کرده‌اید که حاوی یک رمز است.\n                    ")]),a("p",[t._v("\n                        یا روی نشانی ارسال شده به پست الکترونیکی خود کلیک کنید یا رمز دریافتی را در کادر زیر وارد کرده روی دکمهٔ «ادامه» کلیک کنید.\n                    ")])]):t._e(),a("v-card-text",[a("v-text-field",{staticClass:"ltrinput",attrs:{"prepend-inner-icon":"lock",placeholder:"رمز دریافتی"},model:{value:t.secret,callback:function(e){t.secret=e},expression:"secret"}})],1),a("v-card-text",[a("v-btn",{attrs:{color:"error"},on:{click:function(e){return t.verify()}}},[t._v("ادامه")])],1),""==t.secret?a("v-card-text",[a("img",{attrs:{src:r("ea84")}}),a("img",{attrs:{src:r("9c06")}})]):t._e()],1)],1):t._e(),t.finalizing&&!t.processing?a("v-layout",{attrs:{"justify-space-around":"",color:"primary"}},[a("v-card",[a("v-card-text",[a("p",[t._v("\n                        لطفا نام و نام خانوادگی و رمز مد نظر خود برای ورود را وارد کنید.\n                    ")])]),a("v-card-text",[a("v-text-field",{attrs:{"prepend-inner-icon":"person",placeholder:"نام"},model:{value:t.firstName,callback:function(e){t.firstName=e},expression:"firstName"}})],1),a("v-card-text",[a("v-text-field",{attrs:{"prepend-inner-icon":"person",placeholder:"نام خانوادگی"},model:{value:t.sureName,callback:function(e){t.sureName=e},expression:"sureName"}})],1),a("v-card-text",[a("p",[t._v("گذرواژه باید شامل ۶ حرف باشد و از ترکیبی از اعداد و حروف انگلیسی تشکیل شده باشد.")]),a("p",[t._v("حروف و اعداد نباید تکراری باشند و وجود حداقل یک عدد و یک حرف کوچک انگلیسی در گذرواژه الزامی است.")])]),a("v-card-text",[a("v-text-field",{attrs:{"prepend-inner-icon":"lock",type:"password",placeholder:"گذرواژه دلخواه"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),a("v-card-text",[a("v-text-field",{attrs:{"prepend-inner-icon":"lock",type:"password",placeholder:"تکرار گذرواژه"},model:{value:t.confirm,callback:function(e){t.confirm=e},expression:"confirm"}})],1),a("v-card-text",[a("v-btn",{attrs:{color:"error"},on:{click:function(e){return t.finalize()}}},[t._v("ادامه")])],1)],1)],1):t._e(),t.processing?a("v-layout",{attrs:{"justify-space-around":"",color:"primary"}},[a("v-progress-linear",{attrs:{indeterminate:""}})],1):t._e(),t.finalized?a("v-layout",{attrs:{"justify-space-around":"",color:"primary"}},[a("v-card",[a("router-link",{attrs:{to:"/"}},[a("v-btn",{staticClass:"ma-2 white--text",attrs:{color:"green"},on:{click:t.signin}},[t._v("\n                        تبریک! ثبت نام تکمیل شد. برای ورود به سیستم کلیک کنید.        ‌"),a("v-icon",{attrs:{right:"",dark:""}},[t._v("done")])],1)],1)],1)],1):null!=t.userInfo?a("v-layout",{attrs:{"justify-space-around":""}},[a("div",[a("v-card",[a("v-card-text",[t._v("\n                        شما پیش‌تر ثبت نام کرده‌اید!\n                    ")])],1)],1)]):t._e()],1)],1)},it=[],ot={name:"SignUp",data:function(){return{captchaImageId:"",email:"",captcha:"",secret:"",firstName:"",sureName:"",password:"",confirm:"",userInfo:null,errorMsg:"",verifying:!1,processing:!1,finalizing:!1,finalized:!1}},mounted:function(){if(document.title="گنجینهٔ گنجور - ثبت نام کاربر جدید",localStorage.getItem("userInfo"))try{this.userInfo=JSON.parse(localStorage.getItem("userInfo"))}catch(t){localStorage.removeItem("userInfo")}else null!=this.$route.query.secret&&(this.verifying=!0,this.secret=this.$route.query.secret),this.verifying||(null!=this.$route.query.email&&(this.email=this.$route.query.email),this.newcaptcha())},methods:{newcaptcha:function(){var t=this;this.processing=!0,l()({method:"GET",url:this.appConfig.$api_url+"/api/users/captchaimage",data:{},headers:{"content-type":"application/json"}}).then(function(e){t.captchaImageId=e.data,t.processing=!1},function(e){t.processing=!1,t.errorMsg=d.handle(e)})},signup:function(){var t=this;this.processing=!0,this.errorMsg="",l()({method:"POST",url:this.appConfig.$api_url+"/api/users/signup",data:{email:this.email,clientAppName:"Museum Clinet Web UI",language:"fa-IR",captchaImageId:this.captchaImageId,captchaValue:this.captcha},headers:{"content-type":"application/json"}}).then(function(){t.processing=!1,t.verifying=!0},function(e){t.newcaptcha(),t.processing=!1,t.errorMsg=d.handle(e)})},verify:function(){var t=this;this.processing=!0,this.errorMsg="",l()({method:"GET",url:this.appConfig.$api_url+"/api/users/verify?type=0&secret="+this.secret,data:{},headers:{"content-type":"application/json"}}).then(function(e){t.processing=!1,t.verifying=!1,t.finalizing=!0,t.email=e.data},function(e){t.processing=!1,t.errorMsg=d.handle(e)})},finalize:function(){var t=this;this.errorMsg="",this.password==this.confirm?(this.processing=!0,l()({method:"POST",url:this.appConfig.$api_url+"/api/users/finalizesignup",data:{email:this.email,secret:this.secret,password:this.password,firstName:this.firstName,sureName:this.sureName},headers:{"content-type":"application/json"}}).then(function(){t.processing=!1,t.finalizing=!1,t.finalized=!0},function(e){t.processing=!1,t.errorMsg=d.handle(e)})):this.errorMsg="تکرار گذرواژه با گذرواژه وارد شده همخوانی ندارد."},signin:function(){var t=this;this.errorMsg="",this.processing=!0,l()({method:"POST",url:this.appConfig.$api_url+"/api/users/login",data:{username:this.email,password:this.password,clientAppName:"Vue.js Client App",language:"fa-IR"},headers:{"content-type":"application/json"}}).then(function(e){localStorage.setItem("userInfo",JSON.stringify(e.data)),t.userInfo=e.data,g.$emit("user-logged-in",t.userInfo),t.processing=!1,t.$router.push("/")},function(e){t.processing=!1,t.errorMsg=d.handle(e)})}}},st=ot,lt=(r("1d1f"),Object(v["a"])(st,nt,it,!1,null,null,null)),ct=lt.exports,ut=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"signup"},[r("v-content",{staticClass:"pa-0"},[""!=t.errorMsg?r("v-layout",{attrs:{"justify-space-around":"",color:"primary"}},[r("v-card",{attrs:{color:"red"}},[r("v-card-text",[t._v("\n                    "+t._s(t.errorMsg)+"\n                ")])],1)],1):t._e(),null===t.userInfo&&!t.verifying&&!t.finalizing&&!t.processing&!t.finalized?r("v-layout",{attrs:{"justify-space-around":"",color:"primary"}},[r("v-card",[r("v-card-text",[r("p",[t._v("\n                        لطفا پست الکترونیکی که با آن ثبت نام کرده‌اید را وارد کنید:\n                    ")])]),r("v-card-text",[r("v-text-field",{staticClass:"ltrinput",attrs:{"prepend-inner-icon":"email",placeholder:"پست الکترونیکی"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),r("v-card-text",[""!=t.captchaImageId?r("v-img",{staticClass:"lighten-2",attrs:{src:t.appConfig.$api_url+"/api/rimages/"+t.captchaImageId+".jpg","max-width":"50px","max-height":"30px"}}):t._e()],1),r("v-card-text",[r("p",[t._v("\n                        عددی را که در تصویر امنیتی بالا می‌بینید در کادر زیر وارد کنید:\n                    ")]),r("v-text-field",{staticClass:"ltrinput",attrs:{"prepend-inner-icon":"lock",placeholder:"عدد تصویر امنیتی"},model:{value:t.captcha,callback:function(e){t.captcha=e},expression:"captcha"}})],1),r("v-card-text",[r("v-btn",{attrs:{color:"error"},on:{click:function(e){return t.forgot()}}},[t._v("ادامه")])],1)],1)],1):t._e(),t.verifying&&!t.processing?r("v-layout",{attrs:{"justify-space-around":"",color:"primary"}},[r("v-card",[""==t.secret?r("v-card-text",[r("p",[t._v("\n                        لطفا پست الکترونیکی خود را چک کنید. در صورتی که نشانی پست الکترونیکی خود را درست وارد کرده باشید نامه‌ای از گنجینهٔ گنجور دریافت کرده‌اید که حاوی یک رمز است.\n                    ")]),r("p",[t._v("\n                        یا روی نشانی ارسال شده به پست الکترونیکی خود کلیک کنید یا رمز دریافتی را در کادر زیر وارد کنید:\n                    ")])]):t._e(),r("v-card-text",[r("v-text-field",{staticClass:"ltrinput",attrs:{"prepend-inner-icon":"lock",placeholder:"رمز دریافتی"},model:{value:t.secret,callback:function(e){t.secret=e},expression:"secret"}})],1),r("v-card-text",[r("v-btn",{attrs:{color:"error"},on:{click:function(e){return t.verify()}}},[t._v("ادامه")])],1)],1)],1):t._e(),t.finalizing&&!t.processing?r("v-layout",{attrs:{"justify-space-around":"",color:"primary"}},[r("v-card",[r("v-card-text",[r("p",[t._v("\n                        لطفا گذرواژهٔ جدید خود برای ورود را وارد کنید.\n                    ")]),r("p",[t._v("گذرواژه باید شامل ۶ حرف باشد و از ترکیبی از اعداد و حروف انگلیسی تشکیل شده باشد.")]),r("p",[t._v("حروف و اعداد نباید تکراری باشند و وجود حداقل یک عدد و یک حرف کوچک انگلیسی در گذرواژه الزامی است.")])]),r("v-card-text",[r("v-text-field",{attrs:{"prepend-inner-icon":"lock",type:"password",placeholder:"گذرواژه دلخواه"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),r("v-card-text",[r("v-text-field",{attrs:{"prepend-inner-icon":"lock",type:"password",placeholder:"تکرار گذرواژه"},model:{value:t.confirm,callback:function(e){t.confirm=e},expression:"confirm"}})],1),r("v-card-text",[r("v-btn",{attrs:{color:"error"},on:{click:function(e){return t.finalize()}}},[t._v("ادامه")])],1)],1)],1):t._e(),t.processing?r("v-layout",{attrs:{"justify-space-around":"",color:"primary"}},[r("v-progress-linear",{attrs:{indeterminate:""}})],1):t._e(),t.finalized?r("v-layout",{attrs:{"justify-space-around":"",color:"primary"}},[r("v-card",[r("router-link",{attrs:{to:"/"}},[r("v-btn",{staticClass:"ma-2 white--text",attrs:{color:"green"},on:{click:t.signin}},[t._v("\n                        تبریک! گذرواژهٔ شما تغییر کرد. برای ورود به سیستم کلیک کنید.        ‌"),r("v-icon",{attrs:{right:"",dark:""}},[t._v("done")])],1)],1)],1)],1):null!=t.userInfo?r("v-layout",{attrs:{"justify-space-around":""}},[r("div",[r("v-card",[r("v-card-text",[t._v("\n                        شما پیش‌تر وارد سیستم شده‌اید!\n                    ")])],1)],1)]):t._e()],1)],1)},dt=[],gt={name:"ForgotPassword",data:function(){return{captchaImageId:"",email:"",captcha:"",secret:"",password:"",confirm:"",userInfo:null,errorMsg:"",verifying:!1,processing:!1,finalizing:!1,finalized:!1}},mounted:function(){if(document.title="گنجینهٔ گنجور - فراموشی گذرواژه",localStorage.getItem("userInfo"))try{this.userInfo=JSON.parse(localStorage.getItem("userInfo"))}catch(t){localStorage.removeItem("userInfo")}else null!=this.$route.query.secret&&(this.verifying=!0,this.secret=this.$route.query.secret),this.verifying||(null!=this.$route.query.email&&(this.email=this.$route.query.email),this.newcaptcha())},methods:{newcaptcha:function(){var t=this;this.errorMsg="",this.processing=!0,l()({method:"GET",url:this.appConfig.$api_url+"/api/users/captchaimage",data:{},headers:{"content-type":"application/json"}}).then(function(e){t.captchaImageId=e.data,t.processing=!1},function(e){t.processing=!1,t.errorMsg=d.handle(e)})},forgot:function(){var t=this;this.errorMsg="",this.processing=!0,l()({method:"POST",url:this.appConfig.$api_url+"/api/users/forgotpassword",data:{email:this.email,clientAppName:"Museum Clinet Web UI",language:"fa-IR",captchaImageId:this.captchaImageId,captchaValue:this.captcha},headers:{"content-type":"application/json"}}).then(function(){t.processing=!1,t.verifying=!0},function(e){t.newcaptcha(),t.processing=!1,t.errorMsg=d.handle(e)})},verify:function(){var t=this;this.errorMsg="",this.processing=!0,l()({method:"GET",url:this.appConfig.$api_url+"/api/users/verify?type=1&secret="+this.secret,data:{},headers:{"content-type":"application/json"}}).then(function(e){t.processing=!1,t.verifying=!1,t.finalizing=!0,t.email=e.data},function(e){t.processing=!1,t.errorMsg=d.handle(e)})},finalize:function(){var t=this;this.errorMsg="",this.password==this.confirm?(this.processing=!0,l()({method:"POST",url:this.appConfig.$api_url+"/api/users/resetpassword",data:{email:this.email,secret:this.secret,password:this.password},headers:{"content-type":"application/json"}}).then(function(){t.processing=!1,t.finalizing=!1,t.finalized=!0},function(e){t.processing=!1,t.errorMsg=d.handle(e)})):this.errorMsg="تکرار گذرواژه با گذرواژه وارد شده همخوانی ندارد."},signin:function(){var t=this;this.errorMsg="",this.processing=!0,l()({method:"POST",url:this.appConfig.$api_url+"/api/users/login",data:{username:this.email,password:this.password,clientAppName:"Vue.js Client App",language:"fa-IR"},headers:{"content-type":"application/json"}}).then(function(e){localStorage.setItem("userInfo",JSON.stringify(e.data)),t.userInfo=e.data,g.$emit("user-logged-in",t.userInfo),t.processing=!1,t.$router.push("/")},function(e){t.processing=!1,t.errorMsg=d.handle(e)})}}},pt=gt,ht=(r("989f"),Object(v["a"])(pt,ut,dt,!1,null,null,null)),vt=ht.exports,ft=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{attrs:{"grid-list-md":"","text-center":""}},[r("v-layout",{attrs:{wrap:""}},[null==t.users?r("v-flex",{attrs:{xs12:""}},[r("v-card",{attrs:{dark:"",color:"secondary"}},[r("v-progress-circular",{attrs:{indeterminate:""}})],1)],1):t._e(),""!=t.errMsg?r("v-flex",{attrs:{xs12:""}},[r("v-card",[r("v-card-text",[t._v("\n                    "+t._s(t.errMsg)+"\n                ")])],1)],1):t._e(),null!=t.users?r("v-flex",{attrs:{xs12:""}},[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.users,"items-per-page":-1,"single-expand":!0,expanded:t.expanded,"item-key":"id","show-expand":"","item-expanded":t.tableItemExpanded()},on:{"update:expanded":function(e){t.expanded=e}},scopedSlots:t._u([{key:"top",fn:function(){return[r("v-toolbar",{attrs:{flat:"",color:"white"}},[r("v-toolbar-title",[t._v("مدیریت کاربران")]),r("div",{staticClass:"flex-grow-1"})],1)]},proxy:!0},{key:"expanded-item",fn:function(e){var a=e.headers;return[r("td",{attrs:{colspan:a.length}},[t._l(t.roles,function(e){return r("v-chip",{key:e.name,attrs:{close:"",color:"green"},on:{"click:close":function(r){return t.deleteUserRole(e)}}},[t._v("\n                            "+t._s(e)+"\n                        ")])}),r("v-btn",{staticClass:"mx-2",attrs:{fab:"",dark:"","x-small":"",color:"indigo"},on:{click:function(e){return t.addUserRole()}}},[r("v-icon",{attrs:{dark:""}},[t._v("add")])],1),r("v-checkbox",{attrs:{label:"فعال"},on:{change:function(e){return t.changeUserStatus()}},model:{value:t.userStatus,callback:function(e){t.userStatus=e},expression:"userStatus"}})],2)]}}],null,!1,115412670)})],1):t._e()],1),r("v-dialog",{attrs:{width:"500"},model:{value:t.showRoleSelectDialog,callback:function(e){t.showRoleSelectDialog=e},expression:"showRoleSelectDialog"}},[r("v-card",[r("v-card-text",[r("v-select",{attrs:{items:t.unassignedRoleArray,label:"نقش",hint:"نقش","persistent-hint":"","return-object":"","single-line":""},model:{value:t.selectedRole,callback:function(e){t.selectedRole=e},expression:"selectedRole"}})],1),r("v-divider"),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.onAddToRoleOKClicked()}}},[t._v("تأیید")]),r("v-btn",{attrs:{color:"secondary",text:""},on:{click:function(e){t.showRoleSelectDialog=!1}}},[t._v("انصراف")])],1)],1)],1)],1)},mt=[],_t={name:"Users",data:function(){return{userInfo:null,errMsg:"",headers:[{text:"پست الکترونیکی",value:"email"},{text:"نام",value:"firstName"},{text:"نام خانوادگی",value:"sureName"}],users:null,expanded:[],roles:[],showRoleSelectDialog:!1,selectedRole:"",unassignedRoleArray:[],allroles:[],userStatus:!1}},mounted:function(){var t=this;if(document.title="گنجینهٔ گنجور - مدیریت کاربران",localStorage.getItem("userInfo"))try{this.userInfo=JSON.parse(localStorage.getItem("userInfo"))}catch(e){this.userInfo=null}g.$on("user-logged-in",this.userLoggedIn),g.$on("user-logged-out",this.userLoggedOut),l()({method:"GET",url:this.appConfig.$api_url+"/api/users",data:{},headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(e){t.users=e.data},function(e){t.errMsg="users: "+d.handle(e)}),l()({method:"GET",url:this.appConfig.$api_url+"/api/roles",data:{},headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(e){t.allroles=[];for(var r=0;r<e.data.length;r++)t.allroles.push(e.data[r].name)},function(e){t.errMsg="roles: "+d.handle(e)})},methods:{userLoggedIn:function(t){this.userInfo=t},userLoggedOut:function(){this.userInfo=null},tableItemExpanded:function(){null!=this.expanded&&0!=this.expanded.length&&(this.userStatus=1==this.expanded[0].status,this.enumerateUserRoles(this.expanded[0].id))},enumerateUserRoles:function(t){var e=this;l()({method:"GET",url:this.appConfig.$api_url+"/api/users/"+t+"/roles",data:{},headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(t){e.roles=t.data},function(t){e.errMsg=d.handle(t)})},deleteUserRole:function(t){var e=this;this.errMsg="";var r=this.expanded[0].id;l()({method:"DELETE",url:this.appConfig.$api_url+"/api/users/"+r+"/roles/"+t,data:{},headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(t){t?e.enumerateUserRoles(r):e.errMsg="حذف نقش برای کاربر موفق نبود."},function(t){e.errMsg=d.handle(t)})},addUserRole:function(){this.errMsg="",this.unassignedRoleArray=[];for(var t=0;t<this.allroles.length;t++){for(var e=!1,r=0;r<this.roles.length;r++)if(this.allroles[t]===this.roles[r]){e=!0;break}e||this.unassignedRoleArray.push(this.allroles[t])}this.unassignedRoleArray.length>0&&(this.selectedRole=this.unassignedRoleArray[0]),this.showRoleSelectDialog=!0},onAddToRoleOKClicked:function(){var t=this;this.errMsg="";var e=this.expanded[0].id;l()({method:"POST",url:this.appConfig.$api_url+"/api/users/"+e+"/roles/"+this.selectedRole,data:{},headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(r){r?t.enumerateUserRoles(e):t.errMsg="اضافه کردن نقش برای کاربر موفق نبود.",t.showRoleSelectDialog=!1},function(e){t.errMsg=d.handle(e),t.showRoleSelectDialog=!1})},changeUserStatus:function(){var t=this;this.errMsg="";for(var e=this.expanded[0].id,r=0;r<this.users.length;r++)if(this.users[r].id===e){var a=0;this.userStatus&&(a=1),l()({method:"PUT",url:this.appConfig.$api_url+"/api/users/"+e,data:{password:"",isAdmin:this.users[r].isAdmin,id:e,username:this.users[r].username,email:this.users[r].email,phoneNumber:this.users[r].phoneNumber,firstName:this.users[r].firstName,sureName:this.users[r].sureName,status:a,rImageId:this.users[r].rImageId},headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(e){e?t.users[r].status=a:t.errMsg="تغییر وضعیت کاربر غیرفعال نبود."},function(e){t.errMsg=d.handle(e)});break}}}},bt=_t,yt=Object(v["a"])(bt,ft,mt,!1,null,"0eaf803e",null),kt=yt.exports,xt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{attrs:{"grid-list-md":"","text-center":"","fill-height":""}},[r("v-layout",{attrs:{wrap:""}},[null==t.roles?r("v-flex",{attrs:{xs12:""}},[r("v-card",{attrs:{dark:"",color:"secondary"}},[r("v-progress-circular",{attrs:{indeterminate:""}})],1)],1):t._e(),""!=t.errMsg?r("v-flex",{attrs:{xs12:""}},[r("v-card",[r("v-card-text",[t._v("\n                    "+t._s(t.errMsg)+"\n                ")])],1)],1):t._e(),null!=t.roles?r("v-flex",{attrs:{xs12:""}},[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.roles,"items-per-page":-1,expanded:t.expanded,"single-expand":!0,"item-key":"name","show-expand":"","item-expanded":t.tableItemExpanded()},on:{"update:expanded":function(e){t.expanded=e}},scopedSlots:t._u([{key:"top",fn:function(){return[r("v-toolbar",{attrs:{flat:"",color:"white"}},[r("v-toolbar-title",[t._v("مدیریت نقشها")]),r("div",{staticClass:"flex-grow-1"}),t.addclicked?t._e():r("v-btn",{staticClass:"mx-2",attrs:{fab:"",dark:"","x-small":"",color:"indigo"},on:{click:function(e){t.addclicked=!0}}},[r("v-icon",{attrs:{dark:""}},[t._v("add")])],1),t.addclicked?r("v-text-field",{attrs:{label:"نام نقش جدید"},model:{value:t.newRoleName,callback:function(e){t.newRoleName=e},expression:"newRoleName"}}):t._e(),t.addclicked?r("v-btn",{staticClass:"mx-2",attrs:{fab:"",dark:"","x-small":"",color:"indigo"},on:{click:t.saveNewRoleClicked}},[r("v-icon",{attrs:{dark:""}},[t._v("save")])],1):t._e(),t.addclicked?r("v-btn",{staticClass:"mx-2",attrs:{fab:"",dark:"","x-small":""},on:{click:function(e){t.addclicked=!1}}},[r("v-icon",{attrs:{dark:""}},[t._v("cancel")])],1):t._e()],1)]},proxy:!0},{key:"expanded-item",fn:function(e){var a=e.headers;return[r("td",{attrs:{colspan:a.length}},[[r("v-treeview",{attrs:{selectable:"","selected-color":"red",items:t.securableitems,"open-all":!0},model:{value:t.selectedTreeNodes,callback:function(e){t.selectedTreeNodes=e},expression:"selectedTreeNodes"}}),r("v-divider"),r("v-btn",{on:{click:function(e){return t.onPermissionsSave(t.expanded[0].name)}}},[t._v("ذخیره")])]],2)]}}],null,!1,1186543037)})],1):t._e()],1)],1)},It=[],Nt={name:"Roles",data:function(){return{userInfo:null,errMsg:"",headers:[{text:"نام",value:"name"},{text:"توضیحات",value:"description"}],roles:null,expanded:[],securableitems:[],selectedTreeNodes:[],addclicked:!1,newRoleName:""}},mounted:function(){var t=this;if(document.title="گنجینهٔ گنجور - مدیریت نقشها",localStorage.getItem("userInfo"))try{this.userInfo=JSON.parse(localStorage.getItem("userInfo"))}catch(e){this.userInfo=null}g.$on("user-logged-in",this.userLoggedIn),g.$on("user-logged-out",this.userLoggedOut),l()({method:"GET",url:this.appConfig.$api_url+"/api/roles/securableitems",data:{},headers:{"content-type":"application/json"}}).then(function(e){t.securableitems=[];for(var r=0;r<e.data.length;r++){for(var a={id:e.data[r].shortName,name:e.data[r].description,securableItemShortName:e.data[r].shortName,operationShortName:e.data[r].shortName,children:[]},n=0;n<e.data[r].operations.length;n++)a.children.push({id:e.data[r].shortName+":"+e.data[r].operations[n].shortName,name:e.data[r].operations[n].description,securableItemShortName:e.data[r].shortName,operationShortName:e.data[r].operations[n].shortName});t.securableitems.push(a)}},function(e){t.errMsg="securableitems: "+d.handle(e)}),this.enumerateRoles()},methods:{enumerateRoles:function(){var t=this;l()({method:"GET",url:this.appConfig.$api_url+"/api/roles",data:{},headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(e){t.roles=e.data},function(e){t.errMsg="roles: "+d.handle(e)})},userLoggedIn:function(t){this.userInfo=t},userLoggedOut:function(){this.userInfo=null},tableItemExpanded:function(){if(this.selectedTreeNodes=[],null!=this.expanded&&0!=this.expanded.length){var t=[];if(null!=this.expanded[0].permissions)for(var e=0;e<this.expanded[0].permissions.length;e++){var r=this.expanded[0].permissions[e].securableItemShortName+":"+this.expanded[0].permissions[e].operationShortName;t.push(r)}this.selectedTreeNodes=t}},onPermissionsSave:function(t){var e=this;this.errMsg="";for(var r=[],a=0;a<this.securableitems.length;a++){for(var n={shortName:this.securableitems[a].securableItemShortName,description:null,operations:[]},i=0;i<this.securableitems[a].children.length;i++)for(var o=0;o<this.selectedTreeNodes.length;o++)this.securableitems[a].children[i].id==this.selectedTreeNodes[o]&&n.operations.push({shortName:this.securableitems[a].children[i].operationShortName,description:null,status:!0});r.push(n)}l()({method:"PUT",url:this.appConfig.$api_url+"/api/roles/permissions/"+t,data:r,headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(){e.errMsg="دسترسیهای نقش به درستی ذخیره شد."},function(t){e.errMsg=d.handle(t)})},saveNewRoleClicked:function(){var t=this;this.errMsg="",""!==this.newRoleName?l()({method:"POST",url:this.appConfig.$api_url+"/api/roles",data:{name:this.newRoleName},headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(){t.enumerateRoles(),t.errMsg="نقش ایجاد شد.",t.addclicked=!1},function(e){t.errMsg=d.handle(e)}):this.errMsg="نام نقش خالی است."}}},wt=Nt,Tt=Object(v["a"])(wt,xt,It,!1,null,"21544c9c",null),Ct=Tt.exports,jt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{attrs:{"grid-list-md":"","text-center":""}},[r("v-layout",{attrs:{wrap:""}},[null!=t.userInfo?r("v-flex",{attrs:{xs12:""}},[r("v-card",[r("v-card-text",[r("h2",[t._v("ویرایش مشخصات")])])],1),r("v-card",[r("v-card-text",[null==t.userInfo.user.rImageId?r("v-icon",{attrs:{size:"196"}},[t._v("account_circle")]):t._e(),null!=t.userInfo.user.rImageId?r("v-img",{staticClass:"centeredimg",attrs:{width:"196",height:"196",src:t.appConfig.$api_url+"/api/rimages/"+t.userInfo.user.rImageId+".jpg"}}):t._e()],1),r("v-card-text",[r("v-file-input",{attrs:{accept:"image/*","prepend-icon":"mdi-camera",label:"تصویر جدید"},model:{value:t.files,callback:function(e){t.files=e},expression:"files"}}),r("v-btn",{staticClass:"ma-2 white--text",attrs:{color:"green"},on:{click:t.handleImageUpload}},[t._v("\n                        ارسال        ‌"),r("v-icon",{attrs:{right:"",dark:""}},[t._v("image")])],1),r("v-btn",{staticClass:"ma-2 white--text",attrs:{color:"red"},on:{click:t.removeImage}},[t._v("\n                        حذف تصویر        ‌"),r("v-icon",{attrs:{right:"",dark:""}},[t._v("clear")])],1)],1)],1),""!=t.errorMsg?r("v-layout",{attrs:{"justify-space-around":"",color:"primary"}},[r("v-card",{attrs:{color:"red"}},[r("v-card-text",[t._v("\n                        "+t._s(t.errorMsg)+"\n                    ")])],1)],1):t._e(),r("v-card",[r("v-card-text",[r("h3",[t._v("تغییر گذرواژه")])]),r("v-card-text",[r("p",[t._v("گذرواژه باید شامل ۶ حرف باشد و از ترکیبی از اعداد و حروف انگلیسی تشکیل شده باشد.")]),r("p",[t._v("حروف و اعداد نباید تکراری باشند و وجود حداقل یک عدد و یک حرف کوچک انگلیسی در گذرواژه الزامی است.")])]),r("v-card-text",[r("v-text-field",{staticClass:"ltrinput",attrs:{"prepend-inner-icon":"lock",type:"password",placeholder:"گذرواژه فعلی"},model:{value:t.oldPassword,callback:function(e){t.oldPassword=e},expression:"oldPassword"}})],1),r("v-card-text",[r("v-text-field",{staticClass:"ltrinput",attrs:{"prepend-inner-icon":"lock",type:"password",placeholder:"گذرواژه جدید"},model:{value:t.newPassword,callback:function(e){t.newPassword=e},expression:"newPassword"}})],1),r("v-card-text",[r("v-text-field",{staticClass:"ltrinput",attrs:{"prepend-inner-icon":"lock",type:"password",placeholder:"تکرار گذرواژه جدید"},model:{value:t.confirmPassword,callback:function(e){t.confirmPassword=e},expression:"confirmPassword"}})],1),r("v-card-text",[r("v-btn",{staticClass:"ma-2 white--text",attrs:{color:"green"},on:{click:t.changePassword}},[t._v("\n                        تغییر گذرواژه        ‌"),r("v-icon",{attrs:{right:"",dark:""}},[t._v("edit")])],1)],1)],1),r("v-card",[r("v-card-text",[r("h3",[t._v("تغییر مشخصات")])]),r("v-card-text",[r("v-text-field",{attrs:{"prepend-inner-icon":"person",placeholder:"نام"},model:{value:t.userInfo.user.firstName,callback:function(e){t.$set(t.userInfo.user,"firstName",e)},expression:"userInfo.user.firstName"}})],1),r("v-card-text",[r("v-text-field",{attrs:{"prepend-inner-icon":"person",placeholder:"نام خانوادگی"},model:{value:t.userInfo.user.sureName,callback:function(e){t.$set(t.userInfo.user,"sureName",e)},expression:"userInfo.user.sureName"}})],1),r("v-card-text",[r("v-btn",{staticClass:"ma-2 white--text",attrs:{color:"green"},on:{click:t.updateUser}},[t._v("\n                        ذخیره        ‌"),r("v-icon",{attrs:{right:"",dark:""}},[t._v("edit")])],1)],1)],1)],1):t._e()],1)],1)},Pt=[],St={name:"Profile",data:function(){return{userInfo:null,errorMsg:"",files:[],oldPassword:"",newPassword:"",confirmPassword:""}},mounted:function(){if(document.title="گنجینهٔ گنجور - مشخصات من",localStorage.getItem("userInfo"))try{this.userInfo=JSON.parse(localStorage.getItem("userInfo"))}catch(t){this.userInfo=null}},methods:{handleImageUpload:function(){0!=this.files.length?this._handleImageUpload():this.errorMsg="لطفا تصویری را انتخاب کنید."},_handleImageUpload:function(){var t=this;this.errorMsg="";var e=new FormData;e.append("id",this.userInfo.user.id),e.append("file",this.files),l()({method:"POST",url:this.appConfig.$api_url+"/api/users/image",data:e,headers:{"content-type":"multipart/form-data",authorization:"bearer "+this.userInfo.token}}).then(function(e){0==t.files.length?(t.userInfo.user.rImageId=null,t.userInfo.user.rImage=null):t.userInfo.user.rImageId=e.data,localStorage.setItem("userInfo",JSON.stringify(t.userInfo))},function(e){t.errorMsg=d.handle(e)})},removeImage:function(){this.files=[],this._handleImageUpload()},changePassword:function(){var t=this;""!=this.oldPassword?this.newPassword==this.confirmPassword?l()({method:"POST",url:this.appConfig.$api_url+"/api/users/setmypassword",data:{oldPassword:this.oldPassword,newPassword:this.newPassword},headers:{"content-type":"application/json",authorization:"bearer "+this.userInfo.token}}).then(function(){t.errorMsg="گذراژهٔ شما به  درستی تغییر کرد."},function(e){t.errorMsg=d.handle(e)}):this.errorMsg="تکرار گذرواژهٔ جدید همخوانی ندارد.":this.errorMsg="لطفا گذرواژهٔ فعلیتان را وارد کنید."},updateUser:function(){var t=this;this.errorMsg="",l()({method:"PUT",url:this.appConfig.$api_url+"/api/users/"+this.userInfo.user.id,data:{password:"",isAdmin:this.userInfo.user.isAdmin,id:this.userInfo.user.id,username:this.userInfo.user.username,email:this.userInfo.user.email,phoneNumber:this.userInfo.user.phoneNumber,firstName:this.userInfo.user.firstName,sureName:this.userInfo.user.sureName,status:this.userInfo.user.status,rImageId:this.userInfo.user.rImageId},headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(e){e?(t.errorMsg="تغییر مشخصات انجام شد.",localStorage.setItem("userInfo",JSON.stringify(t.userInfo))):t.errorMsg="تغییر مشخصات موفق نبود."},function(e){t.errorMsg=d.handle(e)})}}},$t=St,Mt=(r("6e0f"),Object(v["a"])($t,jt,Pt,!1,null,"444b2c46",null)),Ut=Mt.exports,Ot=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{attrs:{"grid-list-md":"","text-center":""}},[r("v-layout",{attrs:{wrap:""}},[r("v-flex",{attrs:{xs12:""}},[t.loading?r("v-card",{attrs:{dark:"",color:"secondary"}},[r("v-progress-circular",{attrs:{indeterminate:""}})],1):t._e()],1),""!=t.errorMsg?r("v-flex",{attrs:{xs12:""}},[r("v-card",{attrs:{dark:"",color:"secondary"}},[r("v-card-text",[t._v(t._s(t.errorMsg))])],1)],1):t._e(),r("v-flex",{attrs:{xs12:""}},[null!=t.pageItems?r("v-card",t._l(t.pageItems,function(e){return r("v-card-text",{key:e.id},[null!=e.rArtifactMasterRecord?r("router-link",{attrs:{to:"/items/"+e.rArtifactMasterRecord.friendlyUrl}},[r("v-img",{staticClass:"grey lighten-2 clickable coverImage",attrs:{src:t.appConfig.$api_url+"/api/images/thumb/"+e.rArtifactMasterRecord.coverImage.id+".jpg","max-width":"200px"},scopedSlots:t._u([{key:"placeholder",fn:function(){return[r("v-layout",{attrs:{"fill-height":"","align-center":"","justify-center":"","ma-0":""}},[r("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!0)}),r("v-card",{attrs:{dark:""}},[r("v-card-text",[t._v("\n                                "+t._s(e.rArtifactMasterRecord.name)+"\n                            ")])],1)],1):t._e(),null!=e.rArtifactItemRecord?r("router-link",{attrs:{to:"/items/"+e.rArtifactItemRecord.parentFriendlyUrl+"/"+e.rArtifactItemRecord.item.friendlyUrl}},[r("v-img",{staticClass:"grey lighten-2 clickable coverImage",attrs:{src:t.appConfig.$api_url+"/api/images/thumb/"+e.rArtifactItemRecord.item.images[0].id+".jpg","max-width":"200px"},scopedSlots:t._u([{key:"placeholder",fn:function(){return[r("v-layout",{attrs:{"fill-height":"","align-center":"","justify-center":"","ma-0":""}},[r("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!0)}),r("v-card",{attrs:{dark:""}},[r("v-card-text",[t._v("\n                                "+t._s(e.rArtifactItemRecord.item.name)+" ("+t._s(e.rArtifactItemRecord.parentName)+")\n                            ")])],1)],1):t._e()],1)}),1):t._e(),r("v-card",[r("div",{staticClass:"text-center"},[r("v-pagination",{attrs:{length:t.pageCount,circle:"","prev-icon":"mdi-menu-right","next-icon":"mdi-menu-left"},on:{input:t.pageNumberChanged},model:{value:t.pageNumber,callback:function(e){t.pageNumber=e},expression:"pageNumber"}})],1)])],1)],1)],1)},Et=[],At={name:"Bookmarks",data:function(){return{userInfo:null,bookmarks:[],pageItems:null,pageSize:50,pageNumber:1,pageCount:0,loading:!0,errorMsg:""}},mounted:function(){if(document.title="گنجینهٔ گنجور - نشان شده‌های من",localStorage.getItem("userInfo"))try{this.userInfo=JSON.parse(localStorage.getItem("userInfo")),this.loadBookmarks()}catch(t){this.userInfo=null}},methods:{loadBookmarks:function(){var t=this;this.loading=!0,this.errorMsg="",l()({method:"GET",url:this.appConfig.$api_url+"/api/artifacts/bookmark",data:{},headers:{"content-type":"application/json",authorization:"bearer "+this.userInfo.token}}).then(function(e){t.bookmarks=e.data,t.pageNumber=1,null!=t.$route.params.pageno&&(t.pageNumber=parseInt(t.$route.params.pageno));for(var r=[],a=(t.pageNumber-1)*t.pageSize;a<Math.min(t.pageNumber*t.pageSize,t.bookmarks.length);a++)r.push(t.bookmarks[a]);t.pageCount=t.bookmarks.length%t.pageSize==0?parseInt(t.bookmarks.length/t.pageSize,10):parseInt(t.bookmarks.length/t.pageSize,10)+1,t.pageItems=r,t.loading=!1},function(e){t.errorMsg=d.handle(e)})},pageNumberChanged:function(t){for(var e=[],r=(this.pageNumber-1)*this.pageSize;r<Math.min(this.pageNumber*this.pageSize,this.bookmarks.length);r++)e.push(this.bookmarks[r]);this.pageItems=e,this.$router.push("/bookmarks/pageno/"+t)}},watch:{$route:function(){this.loadBookmarks()}}},Lt=At,Vt=(r("dc06"),Object(v["a"])(Lt,Ot,Et,!1,null,"40a4bf5e",null)),zt=Vt.exports,Dt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{attrs:{"grid-list-md":"","text-center":""}},[r("v-layout",{attrs:{wrap:""}},[r("v-flex",{attrs:{xs12:""}},[t.loading?r("v-card",{attrs:{dark:"",color:"secondary"}},[r("v-progress-circular",{attrs:{indeterminate:""}})],1):t._e()],1),""!=t.errorMsg?r("v-flex",{attrs:{xs12:""}},[r("v-card",{attrs:{dark:"",color:"secondary"}},[r("v-card-text",[t._v(t._s(t.errorMsg))])],1)],1):t._e(),r("v-flex",{attrs:{xs12:""}},[null!=t.pageItems?r("v-card",t._l(t.pageItems,function(e){return r("v-card-text",{key:e.id},[r("router-link",{attrs:{to:"/items/"+e.relatedEntityFriendlyUrl}},[r("v-img",{staticClass:"grey lighten-2 clickable coverImage",attrs:{src:t.appConfig.$api_url+"/api/images/thumb/"+e.relatedEntityImageId+".jpg","max-width":"200px"},scopedSlots:t._u([{key:"placeholder",fn:function(){return[r("v-layout",{attrs:{"fill-height":"","align-center":"","justify-center":"","ma-0":""}},[r("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!0)}),r("v-card",{attrs:{dark:""}},[null==e.relatedItemParentName?r("v-card-text",[t._v("\n                                "+t._s(e.relatedEntityName)+"\n                            ")]):t._e(),null!=e.relatedItemParentName?r("v-card-text",[t._v("\n                                "+t._s(e.relatedEntityName)+" ("+t._s(e.relatedItemParentName)+")\n                            ")]):t._e(),r("v-card-text",{domProps:{innerHTML:t._s(e.htmlContent)}})],1)],1)],1)}),1):t._e(),r("v-card",[r("div",{staticClass:"text-center"},[r("v-pagination",{attrs:{length:t.pageCount,circle:"","prev-icon":"mdi-menu-right","next-icon":"mdi-menu-left"},on:{input:t.pageNumberChanged},model:{value:t.pageNumber,callback:function(e){t.pageNumber=e},expression:"pageNumber"}})],1)])],1)],1)],1)},Rt=[],Gt={name:"UserNotes",data:function(){return{userInfo:null,notes:[],pageItems:null,pageSize:50,pageNumber:1,pageCount:0,loading:!0,errorMsg:"",noteType:"public"}},mounted:function(){if(localStorage.getItem("userInfo"))try{this.userInfo=JSON.parse(localStorage.getItem("userInfo")),this.loadBookmarks()}catch(t){this.userInfo=null}},methods:{loadBookmarks:function(){var t=this;this.loading=!0,this.errorMsg="",null!=this.$route.params.type&&(this.noteType=this.$route.params.type),"public"===this.noteType?document.title="گنجینهٔ گنجور - یادداشتهای عمومی من":document.title="گنجینهٔ گنجور - یادداشتهای شخصی من",l()({method:"GET",url:this.appConfig.$api_url+"/api/artifacts/note/"+this.noteType,data:{},headers:{"content-type":"application/json",authorization:"bearer "+this.userInfo.token}}).then(function(e){t.notes=e.data,t.pageNumber=1,null!=t.$route.params.pageno&&(t.pageNumber=parseInt(t.$route.params.pageno));for(var r=[],a=(t.pageNumber-1)*t.pageSize;a<Math.min(t.pageNumber*t.pageSize,t.notes.length);a++)r.push(t.notes[a]);t.pageCount=t.notes.length%t.pageSize==0?parseInt(t.notes.length/t.pageSize,10):parseInt(t.notes.length/t.pageSize,10)+1,t.pageItems=r,t.loading=!1},function(e){t.errorMsg=d.handle(e)})},pageNumberChanged:function(t){for(var e=[],r=(this.pageNumber-1)*this.pageSize;r<Math.min(this.pageNumber*this.pageSize,this.notes.length);r++)e.push(this.notes[r]);this.pageItems=e,this.$router.push("/mynotes/type/"+this.noteType+"/pageno/"+t)}},watch:{$route:function(){this.loadBookmarks()}}},Ft=Gt,Bt=(r("da16"),Object(v["a"])(Ft,Dt,Rt,!1,null,"119aec7a",null)),Jt=Bt.exports,Kt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{attrs:{"grid-list-md":"","text-center":""}},[r("v-layout",{attrs:{wrap:""}},[r("v-flex",{attrs:{xs12:""}},[t.loading?r("v-card",{attrs:{dark:"",color:"secondary"}},[r("v-progress-circular",{attrs:{indeterminate:""}})],1):t._e()],1),""!=t.errorMsg?r("v-flex",{attrs:{xs12:""}},[r("v-card",{attrs:{dark:"",color:"secondary"}},[r("v-card-text",[t._v(t._s(t.errorMsg))])],1)],1):t._e(),r("v-flex",{attrs:{xs12:""}},[null!=t.pageItems?r("v-card",t._l(t.pageItems,function(e){return r("v-card-text",{key:e.id},[r("v-layout",{attrs:{wrap:""}},[r("v-flex",{attrs:{xs4:""}},[r("v-card",[r("v-card-text",[r("v-card",{attrs:{dark:""}},[r("v-card-text",[t._v(" موضوع یادداشت")])],1)],1),r("v-card-text",[r("router-link",{attrs:{to:"/items/"+e.relatedEntityFriendlyUrl+"#"+e.id}},[r("v-img",{staticClass:"grey lighten-2 clickable coverImage",attrs:{src:t.appConfig.$api_url+"/api/images/thumb/"+e.relatedEntityImageId+".jpg","max-width":"200px"},scopedSlots:t._u([{key:"placeholder",fn:function(){return[r("v-layout",{attrs:{"fill-height":"","align-center":"","justify-center":"","ma-0":""}},[r("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!0)})],1)],1),null==e.relatedItemParentName?r("v-card-text",[r("router-link",{attrs:{to:"/items/"+e.relatedEntityFriendlyUrl+"#"+e.id}},[t._v("\n                                        "+t._s(e.relatedEntityName)+"\n                                    ")])],1):t._e(),null!=e.relatedItemParentName?r("v-card-text",[r("router-link",{attrs:{to:"/items/"+e.relatedEntityFriendlyUrl+"#"+e.id}},[t._v("\n                                        "+t._s(e.relatedEntityName)+" ("+t._s(e.relatedItemParentName)+")\n                                    ")])],1):t._e()],1)],1),r("v-flex",{attrs:{xs8:""}},[r("v-card",[r("v-card-text",[r("v-card",{attrs:{dark:""}},[r("v-card-text",[t._v(" متن یادداشت")])],1)],1),r("v-card-text",{domProps:{innerHTML:t._s(e.htmlContent)}}),r("v-card-text",[null==e.rUserImageId?r("v-icon",{staticClass:"centeredimg",attrs:{size:"60"}},[t._v("account_circle")]):t._e(),null!=e.rUserImageId?r("v-img",{staticClass:"centeredimg",attrs:{"max-width":"60","max-height":"60",src:t.appConfig.$api_url+"/api/rimages/"+e.rUserImageId+".jpg"}}):t._e(),r("br"),r("small",[t._v(t._s(e.userName)+" ("),r("router-link",{attrs:{to:"/items/"+e.relatedEntityFriendlyUrl+"#"+e.id},domProps:{innerHTML:t._s(e.dateTime)}}),t._v(")")],1)],1)],1)],1)],1),r("v-spacer")],1)}),1):t._e(),r("v-card",[r("div",{staticClass:"text-center"},[r("v-pagination",{attrs:{length:t.pageCount,circle:"","prev-icon":"mdi-menu-right","next-icon":"mdi-menu-left"},on:{input:t.pageNumberChanged},model:{value:t.pageNumber,callback:function(e){t.pageNumber=e},expression:"pageNumber"}})],1)])],1)],1)],1)},Ht=[],qt={name:"AllPublicNotes",data:function(){return{pageItems:[],pageSize:50,pageNumber:1,pageCount:0,loading:!0,errorMsg:"",noteType:"public"}},mounted:function(){this.loadBookmarks()},methods:{loadBookmarks:function(){var t=this;this.loading=!0,this.errorMsg="",null!=this.$route.params.type&&(this.noteType=this.$route.params.type),this.pageNumber=1,null!=this.$route.params.pageno&&(this.pageNumber=parseInt(this.$route.params.pageno)),document.title="گنجینهٔ گنجور - یادداشتهای عمومی کاربران - صفحهٔ "+this.pageNumber,l()({method:"GET",url:this.appConfig.$api_url+"/api/artifacts/note/all?PageNumber="+this.pageNumber+"&PageSize="+this.pageSize,data:{},headers:{"content-type":"application/json"}}).then(function(e){t.pageItems=e.data,t.pageCount=JSON.parse(e.headers["paging-headers"]).totalPages,t.loading=!1},function(e){t.errorMsg=d.handle(e)})},pageNumberChanged:function(t){this.$router.push("/notes/pageno/"+t),this.loadBookmarks()}},watch:{$route:function(){this.loadBookmarks()}}},Wt=qt,Qt=(r("ca3b"),Object(v["a"])(Wt,Kt,Ht,!1,null,"69d00b45",null)),Xt=Qt.exports,Yt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{domProps:{innerHTML:t._s(t.htmlSrc)}})},Zt=[],te={name:"GanjoorFrame",data:function(){return{htmlSrc:"",errorMsg:""}},mounted:function(){var t=this;l()({method:"GET",url:this.$route.query.url,data:{},headers:{"content-type":"text/plain"}}).then(function(e){t.htmlSrc=C.replaceArray(e.data,["http://ganjoor.net","https://ganjoor.net"],"/ganjoor?url=https://ganjoor.net");var r="گنجور &raquo; ",a=t.htmlSrc.indexOf(r);if(-1!=a){a+=r.length;var n=t.htmlSrc.indexOf("</title>",a);if(-1!=n){var i=C.replaceAll(t.htmlSrc.substring(a,n),"&raquo;","»");localStorage.setItem("ganjoorPostTitle",i)}}if(r='id="post-',a=t.htmlSrc.indexOf(r,a),-1!=a){a+=r.length;var o=t.htmlSrc.indexOf('"',a);if(-1!=o){var s=t.htmlSrc.substring(a,o);localStorage.setItem("ganjoorPostId",s)}}},function(e){t.errorMsg=d.handle(e)})}},ee=te,re=Object(v["a"])(ee,Yt,Zt,!1,null,"900ba1f4",null),ae=re.exports,ne=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-card",[r("v-toolbar",{attrs:{dark:"",color:"primary"}},[r("v-toolbar-title",[t._v("بازبینی ارتباطات پیشنهادی با اشعار گنجور")]),r("div",{staticClass:"flex-grow-1"}),null!=t.currentLink?r("v-toolbar-items",[null!=t.currentLink?r("div",[r("div",[null==t.currentLink.suggestedBy.rImageId?r("v-icon",{staticClass:"centeredimg",attrs:{size:"42"}},[t._v("account_circle")]):t._e(),null!=t.currentLink.suggestedBy.rImageId?r("v-img",{staticClass:"centeredimg",attrs:{"max-width":"42","max-height":"42",src:t.appConfig.$api_url+"/api/rimages/"+t.currentLink.suggestedBy.rImageId+".jpg"}}):t._e()],1),r("div",[r("small",[t._v(t._s(t.currentLink.suggestedBy.firstName)+" "+t._s(t.currentLink.suggestedBy.sureName))])])]):t._e(),t.processing?t._e():r("v-btn",{attrs:{dark:"",color:"green"},on:{click:function(e){return t.review(!0)}}},[t._v("تأیید"),r("v-icon",{attrs:{left:""}},[t._v("done")])],1),t.processing?t._e():r("v-btn",{attrs:{dark:"",color:"red"},on:{click:function(e){return t.review(!1)}}},[t._v("رد"),r("v-icon",{attrs:{left:""}},[t._v("clear")])],1)],1):t._e()],1),null!=t.currentLink?r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs6:""}},[r("iframe",{ref:"ganjoorFrame",staticStyle:{width:"50vw",height:"70vh"},attrs:{src:"/ganjoor?url="+t.currentLink.ganjoorUrl}})]),r("v-flex",{attrs:{xs6:""}},[r("iframe",{staticStyle:{width:"50vw",height:"70vh"},attrs:{src:""+t.currentLink.entityFriendlyUrl}})])],1):t._e(),r("v-flex",{attrs:{xs12:""}},[r("v-card",[r("v-card-text",[t._v("\n                "+t._s(t.errorMsg)+"\n            ")])],1)],1)],1)},ie=[],oe={name:"GanjoorLinks",data:function(){return{userInfo:null,links:[],currrentLinkIndex:-1,currentLink:null,errorMsg:"",processing:!1}},mounted:function(){var t=this;if(document.title="بازبینی ارتباطات",localStorage.getItem("userInfo"))try{this.userInfo=JSON.parse(localStorage.getItem("userInfo"))}catch(e){this.userInfo=null}l()({method:"GET",url:this.appConfig.$api_url+"/api/artifacts/ganjoor?status=0&onlySynched=false",data:{},headers:{"content-type":"application/json",authorization:"bearer "+this.userInfo.token}}).then(function(e){t.links=e.data,t.links.length>0?(t.currrentLinkIndex=0,t.currentLink=t.links[t.currrentLinkIndex]):t.errorMsg="پیشنهادی برای بازبینی یافت نشد."},function(e){t.errorMsg=d.handle(e)})},methods:{review:function(t){var e=this;this.processing=!0;var r=t?1:2;l()({method:"PUT",url:this.appConfig.$api_url+"/api/artifacts/ganjoor/review/"+this.currentLink.id+"/"+r,data:{},headers:{"content-type":"application/json",authorization:"bearer "+this.userInfo.token}}).then(function(){e.processing=!1,e.currrentLinkIndex++,e.currrentLinkIndex<e.links.length?e.currentLink=e.links[e.currrentLinkIndex]:(e.processing=!1,e.currrentLinkIndex=-1,e.currentLink=null,e.errorMsg="پیشنهاد دیگری برای بازبینی یافت نشد.")},function(t){e.processing=!1,e.errorMsg=d.handle(t)})}}},se=oe,le=(r("c446"),Object(v["a"])(se,ne,ie,!1,null,"3466e78b",null)),ce=le.exports,ue=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{attrs:{"grid-list-md":"","text-center":""}},[r("v-layout",{attrs:{wrap:""}},[r("v-flex",{attrs:{xs12:""}},[t.loading?r("v-card",{attrs:{dark:"",color:"secondary"}},[r("v-progress-circular",{attrs:{indeterminate:""}})],1):t._e()],1),""!=t.errorMsg?r("v-flex",{attrs:{xs12:""}},[r("v-card",{attrs:{dark:"",color:"secondary"}},[r("v-card-text",[t._v(t._s(t.errorMsg))])],1)],1):t._e(),t.loading||0!=t.notifications.length?t._e():r("v-flex",{attrs:{xs12:""}},[r("v-card",{attrs:{dark:"",color:"secondary"}},[r("v-card-text",[t._v("اعلانی وجود ندارد.")])],1)],1),r("v-flex",{attrs:{xs12:""}},t._l(t.notifications,function(e){return r("v-card",{key:e.id},[r("v-card-title",{on:{click:function(r){return t.markAsRead(e)}}},[r("small",[t._v(t._s(e.subject))])]),r("v-card-text",{domProps:{innerHTML:t._s(e.htmlText)},on:{click:function(r){return t.markAsRead(e)}}}),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"green"},on:{click:function(r){return t.switchReadStatus(e)}}},[t._v(t._s(t.getSwitchText(e))),r("v-icon",{attrs:{color:"white",left:""}},[t._v(t._s(t.getSwitchIcon(e)))])],1),r("v-btn",{attrs:{color:"red"},on:{click:function(r){return t.deleteNotification(e,!0)}}},[t._v("حذف"),r("v-icon",{attrs:{color:"white",left:""}},[t._v("delete")])],1)],1)],1)}),1),0!=t.notifications.length?r("v-flex",{attrs:{xs12:""}},[r("v-card",[r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"green"},on:{click:function(e){return t.markAllRead()}}},[t._v("همه را خواندم"),r("v-icon",{attrs:{color:"white",left:""}},[t._v("done_all")])],1),r("v-btn",{attrs:{color:"red"},on:{click:function(e){return t.deleteAll()}}},[t._v("حذف همه"),r("v-icon",{attrs:{color:"white",left:""}},[t._v("delete")])],1)],1)],1)],1):t._e()],1)],1)},de=[],ge={name:"Notifications",data:function(){return{userInfo:null,notifications:[],loading:!0,errorMsg:""}},mounted:function(){if(document.title="گنجینهٔ گنجور - اعلانهای من",localStorage.getItem("userInfo"))try{this.userInfo=JSON.parse(localStorage.getItem("userInfo")),this.loadNotifications()}catch(t){this.userInfo=null}},methods:{loadNotifications:function(){var t=this;this.loading=!0,this.errorMsg="",l()({method:"GET",url:this.appConfig.$api_url+"/api/artifacts/notifications",data:{},headers:{"content-type":"application/json",authorization:"bearer "+this.userInfo.token}}).then(function(e){t.notifications=e.data,t.loading=!1},function(e){t.errorMsg=d.handle(e)})},getSwitchText:function(t){return 0==t.status?"خواندم":""},getSwitchIcon:function(t){return 0==t.status?"done":"undo"},switchReadStatus:function(t){var e=this;this.loading=!0,this.errorMsg="",l()({method:"PUT",url:this.appConfig.$api_url+"/api/artifacts/notifications/"+t.id,data:{},headers:{"content-type":"application/json",authorization:"bearer "+this.userInfo.token}}).then(function(r){t.status=r.data.status,e.loading=!1,g.$emit("user-logged-in",e.userInfo)},function(t){e.errorMsg=d.handle(t)})},markAsRead:function(t){0==t.status&&this.switchReadStatus(t)},deleteNotification:function(t,e){var r=this;e&&!confirm("آیا از حذف این اعلان اطمینان دارید؟")||(this.loading=!0,this.errorMsg="",l()({method:"DELETE",url:this.appConfig.$api_url+"/api/artifacts/notifications/"+t.id,data:{},headers:{"content-type":"application/json",authorization:"bearer "+this.userInfo.token}}).then(function(){r.notifications=r.notifications.filter(function(e){return e!=t}),r.loading=!1,g.$emit("user-logged-in",r.userInfo)},function(t){r.errorMsg=d.handle(t)}))},markAllRead:function(){for(var t=0;t<this.notifications.length;t++)this.markAsRead(this.notifications[t])},deleteAll:function(){if(confirm("آیا از حذف همهٔ اعلانها اطمینان دارید؟"))for(var t=0;t<this.notifications.length;t++)this.deleteNotification(this.notifications[t],!1)}}},pe=ge,he=Object(v["a"])(pe,ue,de,!1,null,"01d1d6cc",null),ve=he.exports,fe=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{attrs:{"grid-list-md":"","text-center":"","fill-height":""}},[r("v-layout",{attrs:{wrap:""}},[""!=t.errMsg?r("v-flex",{attrs:{xs12:""}},[r("v-card",[r("v-card-text",[t._v("\n                    "+t._s(t.errMsg)+"\n                ")])],1)],1):t._e(),null!=t.events?r("v-flex",{attrs:{xs12:""}},[r("v-data-table",{staticClass:"elevation-1",attrs:{dense:"","show-select":"","single-select":"",headers:t.headers,items:t.events,loading:t.loading,"server-items-length":t.totalEvents,"footer-props":{showFirstLastPage:!0,firstIcon:"last_page",lastIcon:"first_page",prevIcon:"keyboard_arrow_right",nextIcon:"keyboard_arrow_left","items-per-page-options":[15,50,100,-1]},"sort-by":t.sortBy,"sort-desc":t.sortDesc},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":[function(e){t.sortDesc=e},t.toggleOrder],"update:page":t.updatePage,"update:options":t.updateOptions,"item-selected":t.itemSelected},scopedSlots:t._u([{key:"top",fn:function(){return[r("v-toolbar",{attrs:{flat:"",color:"white"}},[r("v-toolbar-title",[t._v("رویدادها")]),r("div",{staticClass:"flex-grow-1"}),r("v-text-field",{attrs:{label:"فیلتر کاربر (دقیق)"},model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}}),r("v-btn",{staticClass:"mx-2",attrs:{fab:"",dark:"","x-small":"",color:"indigo"},on:{click:t.enumerateEvents}},[r("v-icon",{attrs:{dark:""}},[t._v("search")])],1)],1),r("v-card",[r("v-card-text",[t._v("\n                            "+t._s(t.jsonData)+"\n                        ")])],1)]},proxy:!0}],null,!1,4157653944)})],1):t._e()],1)],1)},me=[],_e={name:"Events",data:function(){return{userInfo:null,errMsg:"",headers:[{text:"رویداد",value:"eventType"},{text:"زمان",value:"startDate"},{text:"مدت",value:"duration"},{text:"کاربر",value:"userName"},{text:"آیپی",value:"ipAddress"},{text:"کد پاسخ",value:"responseStatusCode"}],events:null,pageSize:15,pageNumber:1,totalEvents:0,loading:!0,jsonData:null,userName:"",sortBy:"startDate",sortDesc:!0}},mounted:function(){if(document.title="گنجینهٔ گنجور - رویدادها",localStorage.getItem("userInfo"))try{this.userInfo=JSON.parse(localStorage.getItem("userInfo"))}catch(t){this.userInfo=null}g.$on("user-logged-in",this.userLoggedIn),g.$on("user-logged-out",this.userLoggedOut),this.enumerateEvents()},methods:{enumerateEvents:function(){var t=this;this.loading=!0,l()({method:"GET",url:this.appConfig.$api_url+"/api/auditlogs?orderByTimeDescending="+this.sortDesc+"&userName="+this.userName+"&PageNumber="+this.pageNumber+"&PageSize="+this.pageSize,data:{},headers:{authorization:"bearer "+this.userInfo.token,"content-type":"application/json"}}).then(function(e){t.totalEvents=JSON.parse(e.headers["paging-headers"]).totalCount,t.events=e.data,t.loading=!1},function(e){t.loading=!1,t.errMsg="events: "+d.handle(e)})},userLoggedIn:function(t){this.userInfo=t},userLoggedOut:function(){this.userInfo=null},updatePage:function(t){this.pageNumber=t,this.enumerateEvents()},updateOptions:function(t){this.pageSize=t.itemsPerPage,this.pageNumber=t.page,this.enumerateEvents()},itemSelected:function(t){this.jsonData="",this.userName="",t.value&&(this.jsonData=t.item.jsonData,this.userName=t.item.userName)},toggleOrder:function(t){this.sortDesc=t,this.sortBy="startDate",this.pageNumber=1,this.enumerateEvents()}}},be=_e,ye=Object(v["a"])(be,fe,me,!1,null,"355f076a",null),ke=ye.exports,xe=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-card",[r("v-toolbar",{attrs:{dark:"",color:"primary"}},[r("v-toolbar-title",[t._v("بازبینی تصاویر مرتبط با اشعار گنجور")]),r("div",{staticClass:"flex-grow-1"}),null!=t.currentLink?r("v-toolbar-items",[t.processing?t._e():r("v-btn",{attrs:{dark:"",color:"green"},on:{click:function(e){return t.review(!0)}}},[t._v("تأیید"),r("v-icon",{attrs:{left:""}},[t._v("done")])],1),t.processing?t._e():r("v-btn",{attrs:{dark:"",color:"red"},on:{click:function(e){return t.review(!1)}}},[t._v("رد"),r("v-icon",{attrs:{left:""}},[t._v("clear")])],1),t.processing?t._e():r("v-btn",{attrs:{dark:"",color:"yellow"},on:{click:function(e){return t.next()}}},[t._v("بعدی"),r("v-icon",{attrs:{left:""}},[t._v("skip_previous")])],1)],1):t._e()],1),null!=t.currentLink?r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs6:""}},[r("iframe",{ref:"ganjoorFrame",staticStyle:{width:"50vw",height:"70vh"},attrs:{src:"/ganjoor?url="+t.currentLink.ganjoorUrl}})]),r("v-flex",{attrs:{xs6:""}},[r("v-card",[r("v-card-text",[r("v-text-field",{attrs:{label:"توضیحات بررسی"},model:{value:t.reviewDesc,callback:function(e){t.reviewDesc=e},expression:"reviewDesc"}})],1),r("v-card-text",[r("p",{staticStyle:{direction:"ltr"}},[r("a",{attrs:{href:""+t.currentLink.pinterestUrl,target:"_blank"}},[t._v(t._s(t.currentLink.pinterestUrl))])])]),r("v-card-text",[r("p",[r("a",{attrs:{href:"/utils",target:"_blank"}},[t._v("ابزارها")])])]),r("v-card-text",[r("v-text-field",{attrs:{label:"نشانی تصویر"},model:{value:t.currentLink.pinterestImageUrl,callback:function(e){t.$set(t.currentLink,"pinterestImageUrl",e)},expression:"currentLink.pinterestImageUrl"}})],1),r("v-card-text",[r("a",{attrs:{href:""+t.currentLink.pinterestImageUrl,target:"_blank"}},[r("img",{attrs:{src:""+t.currentLink.pinterestImageUrl,width:"600"}})])]),r("v-card-text",[r("v-textarea",{attrs:{label:"توضیحات","auto-grow":"",rows:"20"},model:{value:t.currentLink.altText,callback:function(e){t.$set(t.currentLink,"altText",e)},expression:"currentLink.altText"}})],1)],1)],1)],1):t._e(),r("v-flex",{attrs:{xs12:""}},[r("v-card",[r("v-card-text",[t._v("\n                "+t._s(t.errorMsg)+"\n            ")])],1)],1)],1)},Ie=[],Ne={name:"PinterestLinks",data:function(){return{userInfo:null,links:[],currrentLinkIndex:-1,currentLink:null,errorMsg:"",processing:!1,reviewDesc:""}},mounted:function(){var t=this;if(document.title="بازبینی تصاویر",localStorage.getItem("userInfo"))try{this.userInfo=JSON.parse(localStorage.getItem("userInfo"))}catch(e){this.userInfo=null}l()({method:"GET",url:this.appConfig.$api_url+"/api/artifacts/pinterest?status=0&onlySynched=false",data:{},headers:{"content-type":"application/json",authorization:"bearer "+this.userInfo.token}}).then(function(e){t.links=e.data,t.links.length>0?(t.currrentLinkIndex=0,t.currentLink=t.links[t.currrentLinkIndex]):t.errorMsg="پیشنهادی برای بازبینی یافت نشد."},function(e){t.errorMsg=d.handle(e)})},methods:{review:function(t){var e=this;this.processing=!0;var r=t?1:2,a=encodeURIComponent(this.currentLink.pinterestImageUrl);l()({method:"PUT",url:this.appConfig.$api_url+"/api/artifacts/pinterest/review/"+this.currentLink.id+"/"+r+"?altText="+this.currentLink.altText+"&reviewDesc="+this.reviewDesc+"&imageUrl="+a,data:{},headers:{"content-type":"application/json",authorization:"bearer "+this.userInfo.token}}).then(function(){e.processing=!1,e.next()},function(t){e.processing=!1,e.errorMsg=d.handle(t)})},next:function(){this.currrentLinkIndex++,this.currrentLinkIndex<this.links.length?this.currentLink=this.links[this.currrentLinkIndex]:(this.processing=!1,this.currrentLinkIndex=-1,this.currentLink=null,this.errorMsg="پیشنهاد دیگری برای بازبینی یافت نشد.")}}},we=Ne,Te=(r("bb1f"),Object(v["a"])(we,xe,Ie,!1,null,"442eb784",null)),Ce=Te.exports,je=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{attrs:{"grid-list-md":"","text-center":""}},[r("v-layout",{attrs:{wrap:""}},[null!=t.userInfo?r("v-flex",{attrs:{xs12:""}},[r("v-card",[r("v-card-text",[r("v-file-input",{attrs:{accept:"image/*","prepend-icon":"mdi-camera",label:"ارسال تصویر"},model:{value:t.files,callback:function(e){t.files=e},expression:"files"}}),r("v-switch",{attrs:{label:"موقت"},model:{value:t.tempImageUpload,callback:function(e){t.tempImageUpload=e},expression:"tempImageUpload"}}),r("v-btn",{staticClass:"ma-2 white--text",attrs:{color:"green"},on:{click:t.handleImageUpload}},[t._v("\n                        ارسال        ‌"),r("v-icon",{attrs:{right:"",dark:""}},[t._v("image")])],1)],1),null!=t.rImageId?r("v-card-text",[r("a",{attrs:{href:t.appConfig.$api_url+"/api/rimages/"+t.rImageId+".jpg",target:"_blank"}},[t._v(t._s(t.appConfig.$api_url)+"/api/rimages/"+t._s(t.rImageId)+".jpg")])]):t._e(),null!=t.rImageId?r("v-card-text",[r("v-img",{staticClass:"centeredimg",attrs:{src:t.appConfig.$api_url+"/api/rimages/"+t.rImageId+".jpg"}})],1):t._e()],1),""!=t.errorMsg?r("v-layout",{attrs:{"justify-space-around":"",color:"primary"}},[r("v-card",{attrs:{color:"red"}},[r("v-card-text",[t._v("\n                        "+t._s(t.errorMsg)+"\n                    ")])],1)],1):t._e()],1):t._e()],1)],1)},Pe=[],Se={name:"MixUtils",data:function(){return{userInfo:null,errorMsg:"",files:[],rImageId:null,tempImageUpload:!0}},mounted:function(){if(document.title="ابزارها",localStorage.getItem("userInfo"))try{this.userInfo=JSON.parse(localStorage.getItem("userInfo"))}catch(t){this.userInfo=null}},methods:{handleImageUpload:function(){0!=this.files.length?this._handleImageUpload():this.errorMsg="لطفا تصویری را انتخاب کنید."},_handleImageUpload:function(){var t=this;this.errorMsg="";var e=new FormData;e.append("path",this.tempImageUpload?"TempUploads":"PermUploads"),e.append("file",this.files),l()({method:"POST",url:this.appConfig.$api_url+"/api/rimages",data:e,headers:{"content-type":"multipart/form-data",authorization:"bearer "+this.userInfo.token}}).then(function(e){0==t.files.length?t.rImageId=null:t.rImageId=e.data},function(e){t.errorMsg=d.handle(e)})}}},$e=Se,Me=(r("aad8"),Object(v["a"])($e,je,Pe,!1,null,"1277c40c",null)),Ue=Me.exports,Oe=[{path:"/",component:m},{path:"/items",component:I},{path:"/items/pageno/:pageno",component:I},{path:"/signup",component:ct},{path:"/forgot-password",component:vt},{path:"/users",component:kt},{path:"/roles",component:Ct},{path:"/profile",component:Ut},{path:"/bookmarks",component:zt},{path:"/bookmarks/pageno/:pageno",component:zt},{path:"/mynotes/type/:type",component:Jt},{path:"/mynotes/type/:type/pageno/:pageno",component:Jt},{path:"/notes",component:Xt},{path:"/notes/pageno/:pageno",component:Xt},{path:"/items/:friendlyUrl",component:z},{path:"/items/:friendlyUrl/tags/:tag",component:z},{path:"/items/:friendlyUrl/tags/:tag/:value",component:z},{path:"/items/:friendlyUrl/pageno/:pageno",component:z},{path:"/items/:friendlyUrl/:pageUrl",component:J},{path:"/tags/:friendlyUrl",component:X},{path:"/tags/:friendlyUrl/:valueUrl",component:at},{path:"/ganjoor",component:ae},{path:"/glinkrev",component:ce},{path:"/notifications",component:ve},{path:"/logs",component:ke},{path:"/plinkrev",component:Ce},{path:"/utils",component:Ue}],Ee=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",{attrs:{app:"",id:"app"}},[r("v-navigation-drawer",{attrs:{app:"",right:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[r("v-list",{attrs:{dense:""}},[r("v-list-item",[r("v-list-item-action",[r("v-icon",[t._v("home")])],1),r("v-list-item-content",[r("v-list-item-title",[r("router-link",{attrs:{to:"/"}},[t._v("خانه")])],1)],1)],1),r("UserSidebarWidget")],1)],1),r("v-app-bar",{attrs:{color:"cyan",app:"",dark:"",fixed:""}},[r("v-app-bar-nav-icon",{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}),r("v-toolbar-title",{attrs:{id:"logo"}},[r("router-link",{attrs:{to:"/"}},[t._v("گنجینهٔ گنجور")])],1),r("v-spacer")],1),r("v-content",[r("router-view",{attrs:{fluid:"","fill-height":""}})],1),r("v-footer",{attrs:{color:"cyan",app:""}},[r("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("a",{attrs:{href:"http://blog.ganjoor.net/1399/01/29/pinterest/"}},[r("v-btn",t._g({attrs:{text:"",color:"white"}},a),[r("v-icon",[t._v("post_add")])],1)],1)]}}])},[r("span",[t._v("نحوهٔ پیشنهاد اضافه شدن تصاویر جدید از اینستاگرام و سایر منابع")])]),r("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("a",{attrs:{href:"http://blog.ganjoor.net/1398/07/12/mganjoor/"}},[r("v-btn",t._g({attrs:{text:"",color:"white"}},a),[r("v-icon",[t._v("language")])],1)],1)]}}])},[r("span",[t._v("نحوهٔ مشارکت در فهرست‌گذاری نسخه‌های خطی")])]),r("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("a",{attrs:{href:"http://blog.ganjoor.net/1398/07/11/ganjoor-museum/"}},[r("v-btn",t._g({attrs:{text:"",color:"white"}},a),[r("v-icon",[t._v("help")])],1)],1)]}}])},[r("span",[t._v("مرور امکانات گنجینهٔ گنجور")])]),r("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("a",{attrs:{href:"http://blog.ganjoor.net/category/museum/"}},[r("v-btn",t._g({attrs:{text:"",color:"white"}},a),[r("v-icon",[t._v("cast")])],1)],1)]}}])},[r("span",[t._v("تازه‌های گنجینهٔ گنجور")])]),r("v-spacer"),r("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("router-link",{attrs:{to:"/notes"}},[r("v-btn",t._g({attrs:{text:"",color:"white"}},a),[t._v("\n                        یادداشتها"),r("v-icon",[t._v("notes")])],1)],1)]}}])},[r("span",[t._v("یادداشتهای عمومی همهٔ کاربران")])]),r("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("a",{attrs:{href:"https://ganjoor.net/contact/",target:"_blank"}},[r("v-btn",t._g({attrs:{text:"",icon:"",color:"white"}},a),[r("v-icon",[t._v("email")])],1)],1)]}}])},[r("span",[t._v("تماس با ما")])])],1)],1)},Ae=[],Le=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"user"},[r("v-content",{staticClass:"pa-0"},[null==t.userInfo?r("v-layout",{attrs:{"justify-space-around":"",color:"primary"}},[r("v-card",[r("v-card-text",[r("v-text-field",{staticClass:"ltrinput",attrs:{"prepend-inner-icon":"person",placeholder:"پست الکترونیکی"},model:{value:t.input.username,callback:function(e){t.$set(t.input,"username",e)},expression:"input.username"}})],1),r("v-card-text",[r("v-text-field",{staticClass:"ltrinput",attrs:{"prepend-inner-icon":"lock",type:"password",placeholder:"گذرواژه"},model:{value:t.input.password,callback:function(e){t.$set(t.input,"password",e)},expression:"input.password"}})],1),r("v-card-text",[r("v-flex",{attrs:{xs12:"","text-center":""}},[r("v-btn",{attrs:{color:"error"},on:{click:function(e){return t.signin()}}},[t._v("ورود")])],1)],1),r("v-card-text",[r("v-flex",{attrs:{xs12:"","text-center":""}},[r("v-btn",{attrs:{color:"accent"},on:{click:function(e){return t.signup()}}},[t._v("ثبت نام")]),r("v-divider"),r("v-btn",{attrs:{color:"warn"},on:{click:function(e){return t.forgotpassword()}}},[t._v("فراموشی گذرواژه")])],1)],1)],1)],1):t._e(),r("v-layout",{attrs:{wrap:""}},[null!=t.userInfo?r("v-flex",{attrs:{xs12:"","text-center":""}},[r("router-link",{attrs:{to:"/profile"}},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[null==t.userInfo.user.rImageId?r("v-icon",t._g({staticClass:"clickable",attrs:{size:"196"}},a),[t._v("account_circle")]):t._e(),null!=t.userInfo.user.rImageId?r("v-img",t._g({staticClass:"clickable centeredimg",attrs:{"max-width":"196","max-height":"196",src:t.appConfig.$api_url+"/api/rimages/"+t.userInfo.user.rImageId+".jpg"}},a)):t._e()]}}],null,!1,590104345)},[r("span",[t._v("ویرایش مشخصات و تغییر گذرواژه")])])],1),r("div",[r("v-chip",{attrs:{color:"primary"}},[t._v("\n                        سلام "+t._s(t.userInfo.user.firstName)+" "+t._s(t.userInfo.user.sureName)+"!\n                    ")]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("v-chip",t._g({attrs:{color:"red",dark:""}},a),[r("v-icon",{attrs:{dark:""},on:{click:function(e){return t.signout()}}},[t._v("directions_run")])],1)]}}],null,!1,3677794401)},[r("span",[t._v("خروج")])])],1)],1):t._e(),null!=t.userInfo?r("v-flex",{attrs:{xs12:"","text-center":""}},[r("v-card",[r("v-card-text",[r("router-link",{attrs:{to:"/bookmarks"}},[r("v-btn",{attrs:{color:"primary"}},[t._v("نشان شده‌ها"),r("v-icon",{attrs:{left:"",color:"yellow"}},[t._v("star")])],1)],1)],1)],1)],1):t._e(),null!=t.userInfo?r("v-flex",{attrs:{xs12:"","text-center":""}},[r("v-card",[r("v-card-text",[r("router-link",{attrs:{to:"/mynotes/type/public"}},[r("v-btn",{attrs:{color:"primary"}},[t._v("یادداشتهای عمومی من"),r("v-icon",{attrs:{color:"green",left:""}},[t._v("notes")])],1)],1)],1)],1)],1):t._e(),null!=t.userInfo?r("v-flex",{attrs:{xs12:"","text-center":""}},[r("v-card",[r("v-card-text",[r("router-link",{attrs:{to:"/mynotes/type/private"}},[r("v-btn",{attrs:{color:"primary"}},[t._v("یادداشتهای شخصی من"),r("v-icon",{attrs:{color:"red",left:""}},[t._v("notes")])],1)],1)],1)],1)],1):t._e(),null!=t.userInfo?r("v-flex",{attrs:{xs12:"","text-center":""}},[r("v-card",[r("v-card-text",[r("router-link",{attrs:{to:"/notifications"}},[r("v-btn",{attrs:{color:"primary"}},[t._v("\n                                اعلانهای من\n                                "),0==t.unreadNotificationsCount?r("v-icon",{attrs:{left:""}},[t._v("notifications")]):t._e(),0!=t.unreadNotificationsCount?r("v-badge",{attrs:{left:"",color:"red"},scopedSlots:t._u([{key:"badge",fn:function(){return[r("span",[t._v(t._s(t.unreadNotificationsCount))])]},proxy:!0}],null,!1,728619354)},[r("v-icon",{attrs:{color:"red"}},[t._v("notifications")])],1):t._e()],1)],1)],1)],1)],1):t._e(),t.checkPermission("user","view")?r("v-flex",{attrs:{xs12:"","text-center":""}},[r("v-card",[r("v-card-text",[r("router-link",{attrs:{to:"/users"}},[r("v-btn",{attrs:{color:"primary"}},[t._v("مدیریت کاربران"),r("v-icon",{attrs:{left:""}},[t._v("supervisor_account")])],1)],1)],1)],1)],1):t._e(),t.checkPermission("role","view")?r("v-flex",{attrs:{xs12:"","text-center":""}},[r("v-card",[r("v-card-text",[r("router-link",{attrs:{to:"/roles"}},[r("v-btn",{attrs:{color:"primary"}},[t._v("مدیریت نقشها"),r("v-icon",{attrs:{left:""}},[t._v("supervised_user_circle")])],1)],1)],1)],1)],1):t._e(),t.checkPermission("artifact","ganjoor")?r("v-flex",{attrs:{xs12:"","text-center":""}},[r("v-card",[r("v-card-text",[r("router-link",{attrs:{to:"/glinkrev"}},[r("v-btn",{attrs:{color:"primary"}},[t._v("بازبینی ارتباطات"),r("v-icon",{attrs:{left:""}},[t._v("done")])],1)],1)],1)],1),r("v-card",[r("v-card-text",[r("router-link",{attrs:{to:"/plinkrev"}},[r("v-btn",{attrs:{color:"red"}},[t._v("بازبینی تصاویر"),r("v-icon",{attrs:{left:""}},[t._v("done")])],1)],1)],1)],1)],1):t._e(),t.checkPermission("audit","view")?r("v-flex",{attrs:{xs12:"","text-center":""}},[r("v-card",[r("v-card-text",[r("router-link",{attrs:{to:"/logs"}},[r("v-btn",{attrs:{color:"primary"}},[t._v("رویدادها"),r("v-icon",{attrs:{left:""}},[t._v("event")])],1)],1)],1)],1)],1):t._e()],1),t.processing?r("v-layout",{attrs:{"justify-space-around":"",color:"primary"}},[r("v-progress-linear",{attrs:{indeterminate:""}})],1):t._e(),""!=t.errMsg?r("v-layout",{attrs:{"justify-space-around":"",color:"primary"}},[r("v-card",[r("v-card-text",[t._v("\n                    "+t._s(t.errMsg)+"\n                ")])],1)],1):t._e()],1)],1)},Ve=[],ze={name:"UserSidebarWidget",data:function(){return{input:{username:"",password:"",clientAppName:"Vue.js Client App",language:"fa-IR"},userInfo:null,errMsg:"",processing:!1,unreadNotificationsCount:0}},mounted:function(){if(localStorage.getItem("userInfo"))try{this.userInfo=JSON.parse(localStorage.getItem("userInfo"))}catch(t){localStorage.removeItem("userInfo")}g.$on("user-logged-in",this.userLoggedIn),g.$on("user-logged-out",this.userLoggedOut),this.refreshNotificationsCount()},methods:{userLoggedIn:function(t){this.userInfo=t,this.refreshNotificationsCount()},refreshNotificationsCount:function(){var t=this;null!=this.userInfo&&(this.processing=!0,l()({method:"GET",url:this.appConfig.$api_url+"/api/artifacts/notifications/unread/count",data:{},headers:{"content-type":"application/json",authorization:"bearer "+this.userInfo.token}}).then(function(e){t.unreadNotificationsCount=e.data,t.processing=!1},function(e){t.processing=!1,e.response&&401==e.response.status?t.signout():t.errMsg=d.handle(e)}))},userLoggedOut:function(){this.userInfo=null},signin:function(){var t=this;this.processing=!0,this.errMsg="",l()({method:"POST",url:this.appConfig.$api_url+"/api/users/login",data:this.input,headers:{"content-type":"application/json"}}).then(function(e){localStorage.setItem("userInfo",JSON.stringify(e.data)),t.userInfo=e.data,g.$emit("user-logged-in",t.userInfo),t.processing=!1},function(e){t.processing=!1,t.errMsg=d.handle(e)})},signup:function(){g.$emit("signing-up",this.userInfo),this.$router.push("/signup")},forgotpassword:function(){g.$emit("signing-up",this.userInfo),""!=this.input.username?this.$router.push("/forgot-password?email="+this.input.username):this.$router.push("/forgot-password")},signout:function(){var t=this;l()({method:"DELETE",url:this.appConfig.$api_url+"/api/users/delsession?userId="+this.userInfo.user.id+"&sessionId="+this.userInfo.sessionId,headers:{"content-type":"application/json",authorization:"bearer "+this.userInfo.token}}).then(function(){localStorage.removeItem("userInfo"),t.userInfo=null,g.$emit("user-logged-out",t.userInfo),t.$router.push("/")},function(e){localStorage.removeItem("userInfo"),t.userInfo=null,t.errMsg=e,g.$emit("user-logged-out"),t.$router.push("/")})},checkPermission:function(t,e){return T.check(this.userInfo,t,e)}}},De=ze,Re=(r("b45e"),Object(v["a"])(De,Le,Ve,!1,null,null,null)),Ge=Re.exports,Fe={name:"app",components:{UserSidebarWidget:Ge},data:function(){return{userInfo:null,drawer:!1}},created:function(){document.title="گنجینهٔ گنجور"},mounted:function(){if(localStorage.getItem("userInfo"))try{this.userInfo=JSON.parse(localStorage.getItem("userInfo"))}catch(t){this.userInfo=null}g.$on("user-logged-in",this.userLoggedIn),g.$on("user-logged-out",this.userLoggedOut),g.$on("signing-up",this.signingUp)},methods:{userLoggedIn:function(t){this.userInfo=t},userLoggedOut:function(){this.userInfo=null},signingUp:function(){this.drawer=!1}}},Be=Fe,Je=(r("e5cd"),Object(v["a"])(Be,Ee,Ae,!1,null,null,null)),Ke=Je.exports,He=(r("8935"),r("b189")),qe=r.n(He),We=(r("ccd0"),r("0e76")),Qe=r.n(We);a["default"].use(qe.a);var Xe,Ye=new qe.a({lang:{locales:{fa:Qe.a},current:"fa"},icons:{iconfont:"mdi"}});Xe={$api_url:"https://ganjgah.ir"};var Ze=r("7ee0"),tr=r.n(Ze),er=new n["a"]({mode:"history",routes:Oe});a["default"].use(n["a"]),a["default"].use(tr.a,{id:"UA-63626-15",router:er}),a["default"].config.productionTip=!0,a["default"].prototype.appConfig=Xe,new a["default"]({render:function(t){return t(Ke)},vuetify:Ye,router:er}).$mount("#app")},"1ecf":function(t,e,r){},"1fa9":function(t,e,r){},"25af":function(t,e,r){},"2c96":function(t,e,r){"use strict";var a=r("ab38"),n=r.n(a);n.a},3965:function(t,e,r){},4573:function(t,e,r){},5957:function(t,e,r){"use strict";var a=r("8781"),n=r.n(a);n.a},"5fdb":function(t,e,r){},6307:function(t,e,r){},6333:function(t,e,r){"use strict";var a=r("5fdb"),n=r.n(a);n.a},"6e0f":function(t,e,r){"use strict";var a=r("95ed"),n=r.n(a);n.a},8781:function(t,e,r){},"95ed":function(t,e,r){},"989f":function(t,e,r){"use strict";var a=r("1ecf"),n=r.n(a);n.a},"9c06":function(t,e,r){t.exports=r.p+"img/signup-email2.349e71f1.png"},aad8:function(t,e,r){"use strict";var a=r("6307"),n=r.n(a);n.a},ab33:function(t,e,r){},ab38:function(t,e,r){},b45e:function(t,e,r){"use strict";var a=r("0d9c"),n=r.n(a);n.a},b900:function(t,e,r){"use strict";var a=r("3965"),n=r.n(a);n.a},bb1f:function(t,e,r){"use strict";var a=r("e42e"),n=r.n(a);n.a},c446:function(t,e,r){"use strict";var a=r("25af"),n=r.n(a);n.a},ca3b:function(t,e,r){"use strict";var a=r("4573"),n=r.n(a);n.a},da16:function(t,e,r){"use strict";var a=r("1811"),n=r.n(a);n.a},dc06:function(t,e,r){"use strict";var a=r("1fa9"),n=r.n(a);n.a},dd0e:function(t,e,r){},e42e:function(t,e,r){},e5cd:function(t,e,r){"use strict";var a=r("ecc9"),n=r.n(a);n.a},ea84:function(t,e,r){t.exports=r.p+"img/signup-email1.f3220730.png"},ecc9:function(t,e,r){}});
//# sourceMappingURL=app.059bd30f.js.map